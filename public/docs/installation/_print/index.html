<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.123.6">

<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">

<link rel="canonical" type="text/html" href="https://codeblind.ai/docs/installation/">
<link rel="alternate" type="application/rss&#43;xml" href="https://codeblind.ai/docs/installation/index.xml">


<link rel="shortcut icon" href="/favicons/favicon.ico?v=1" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png?v=1" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png?v=1" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png?v=1" sizes="32x32">
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png?v=1" sizes="180x180">
<title>Install and configure Code Blind on Kubernetes | </title><meta property="og:title" content="Install and configure Code Blind on Kubernetes" />
<meta property="og:description" content="Instructions for creating a Kubernetes cluster and installing Code Blind.
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://codeblind.ai/docs/installation/" /><meta property="og:site_name" content="Goldydocs" />

<meta itemprop="name" content="Install and configure Code Blind on Kubernetes">
<meta itemprop="description" content="Instructions for creating a Kubernetes cluster and installing Code Blind.
"><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Install and configure Code Blind on Kubernetes"/>
<meta name="twitter:description" content="Instructions for creating a Kubernetes cluster and installing Code Blind.
"/>



<link rel="stylesheet" href="/css/prism.css"/>






<link href="/scss/main.css" rel="stylesheet">


<link rel="stylesheet" type="text/css" href=https://codeblind.ai/css/asciinema-player.css />
<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

  </head>
  <body class="td-section">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-light  nav-shadow flex-column flex-md-row td-navbar">

	<a id="agones-top"  class="navbar-brand" href="/">
		<svg viewBox="0 -40 700 300" xmlns="http://www.w3.org/2000/svg"><g fill="#006298" fill-rule="none" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode:normal" transform="matrix(1, 0, 0, 1, 4.033676, -59.776756)"><g data-paper-data='{"isGlobalGroup":true,"bounds":{"x":65,"y":134.91096067769388,"width":420,"height":200.17807864461224}}'><g data-paper-data='{"isPrimaryText":true}' fill-rule="nonzero" transform="matrix(1.506311, 0, 0, 1.608315, -96.423798, -293.86853)" style=""><path d="M99.87138 315.5382c-1.20049 6.40261-6.57411 11.03307-12.97673 11.03307-7.14577.0-12.80523-6.00245-12.80523-13.49122.0-7.54594 5.65945-13.60555 12.80523-13.60555 4.4018.0 8.74643 2.22948 11.8334 6.80278l6.91711-4.91629c-3.83013-6.23111-10.86158-10.34708-18.80768-10.34708C74.71825 291.01391 65 300.90366 65 313.08006s9.71825 22.00898 21.89465 22.00898c11.31891.0 20.69416-8.63209 21.95182-19.55084z" data-paper-data='{"glyphName":"C","glyphIndex":0,"firstGlyphOfWord":true,"word":1}'/><path d="M134.79992 335.08904c12.1764.0 22.00898-9.88975 22.00898-22.06615s-9.83258-22.00898-22.06615-22.00898c-12.1764.0-22.00898 9.83258-22.00898 22.00898s9.83258 22.06615 22.06615 22.06615zM134.74275 299.4745c7.20294.0 12.97673 6.05962 12.97673 13.54839.0 7.6031-5.71662 13.54839-12.91956 13.54839-7.31727.0-12.97673-5.94528-12.97673-13.54839.0-7.48877 5.65945-13.54839 12.91956-13.54839z" data-paper-data='{"glyphName":"O","glyphIndex":1,"word":1}'/><path d="M163.15435 291.75707v42.58881h17.32136c12.23356.0 22.23765-9.08942 22.23765-21.32299.0-12.11923-10.00408-21.26582-22.29481-21.26582zm8.86076 34.58554v-26.58228h8.40343c7.4316.0 13.20539 5.54512 13.20539 13.26256.0 7.66027-5.77379 13.31972-13.14822 13.31972z" data-paper-data='{"glyphName":"D","glyphIndex":2,"word":1}'/><path d="M235.46958 334.34588v-8.00327h-17.55002V315.7097h16.00653v-8.00327h-16.00653v-7.9461h13.77705v-8.00327H209.0588v42.58881z" data-paper-data='{"glyphName":"E","glyphIndex":3,"word":1}'/><path d="M256.67824 334.34588c7.83177.0 15.09187-5.03062 15.09187-13.71989.0-4.11597-1.94365-7.7746-5.77379-10.40425 2.05798-1.88648 3.02981-4.2303 3.02981-7.20294.0-7.9461-5.65945-11.26174-13.54839-11.26174h-13.66272v42.58881zM250.67579 326.34261V315.3667h6.28828c3.65864.0 5.71662 2.11515 5.71662 5.54512.0 3.31564-2.05798 5.43079-5.71662 5.43079zm0-18.69334v-7.88893h4.45896c2.45815.0 4.80196.68599 4.80196 3.94447.0 1.77215-.5145 3.94447-4.80196 3.94447z" data-paper-data='{"glyphName":"B","glyphIndex":4,"word":1}'/><path d="M278.11556 291.75707v42.58881h26.01062v-8.00327h-17.14986v-34.58555z" data-paper-data='{"glyphName":"L","glyphIndex":5,"word":1}'/><path d="M317.90323 291.75707h-8.86076v42.58881h8.86076z" data-paper-data='{"glyphName":"I","glyphIndex":6,"word":1}'/><path d="M356.31891 316.3957l-30.29808-25.43895v43.38914h8.86076v-24.46713l30.29808 25.21029v-43.33197h-8.86076z" data-paper-data='{"glyphName":"N","glyphIndex":7,"word":1}'/><path d="M373.29726 291.75707v42.58881h17.32136c12.23356.0 22.23765-9.08942 22.23765-21.32299.0-12.11923-10.00408-21.26582-22.29481-21.26582zM382.15802 326.34261v-26.58228h8.40343c7.4316.0 13.20539 5.54512 13.20539 13.26256.0 7.66027-5.77379 13.31972-13.14822 13.31972z" data-paper-data='{"glyphName":"D","glyphIndex":8,"word":1}'/></g><g data-paper-data='{"fillRule":"evenodd","fillRuleOriginal":"evenodd","isIcon":true,"iconStyle":"standalone","selectedEffects":{"container":"triangle_simple_outline3","transformation":"","pattern":""},"bounds":{"x":200.4253260667158,"y":134.91096067769388,"width":149.1493478665684,"height":129.93559557606665},"widthRatioIconToContainer":0.46864262218011316,"heightRatioIconToContainer":0.5128464428206175,"relativeBoundsIconToContainer":{"top":0.1511909708697078,"left":0.00000405714571068623},"iconType":"icon","rawIconId":"22591","isDetailed":false,"blockLetter":"A","suitableAsStandaloneIcon":true}' fill-rule="evenodd" transform="matrix(0.857575, 0, 0, 0.832887, 371.420288, 37.764965)" style=""><path d="M240.08737 218.30866l-.03565-.03565.03565-.21459c0-3.26912.85904-7.02682 2.57713-11.2738 1.07363-2.36185 2.46949-4.70062 4.18758-7.01493.90657-1.24068 2.39819-2.85113 4.47346-4.83203 2.14726-1.81315 4.21134-3.26842 6.19154-4.36651 1.76562-.97857 3.99676-1.92079 6.69271-2.82736 2.19549-.71575 5.07038-1.21692 8.62538-1.5028l.85904-.03565v.03565l.07199-.03565h2.11161l.25024.03565.03565-.03565.21528.03565c2.95807.0 6.5613.69199 10.80829 2.07597 2.38631.88281 4.74815 2.02843 7.08694 3.43617 1.45527.85904 3.14959 2.11161 5.08226 3.75771 2.33878 2.21925 3.88911 3.93664 4.65239 5.15426 1.79008 2.43314 3.18594 5.04592 4.18758 7.83763 1.14562 3.4837 1.71809 6.52566 1.71809 9.12655l.03495.14259h-.03565l.03565.03565v2.2542l-.03565.03635.03565.03635c0 1.76492-.35788 4.3057-1.07363 7.62305-.66822 2.33808-1.39586 4.34205-2.18291 6.01261-.85904 1.69432-2.02773 3.51935-3.50816 5.47579-.9541 1.16939-2.19549 2.49326-3.72205 3.97299-2.4576 2.07597-4.53287 3.61511-6.22719 4.61675-.73952.38164-1.40774.57247-2.00397.57247-1.59856.0-2.67219-.78775-3.22089-2.36254-.09576-.42917-.14329-.79963-.14329-1.10928.0-1.36021 1.19316-2.66031 3.57947-3.90099.73952-.35788 1.92009-1.26515 3.54242-2.72042 2.07597-2.0522 3.51935-3.75771 4.33086-5.11791.93034-1.43151 1.70551-2.92313 2.3262-4.47346.85904-2.43314 1.28822-4.02051 1.28822-4.76003l.35858-2.29055-.07199-.03565.07199-.21528v-.32223l.03565-.03635-.03565-.03565.03565-.14329.03565-1.61045c0-7.11-2.63584-13.29036-7.90893-18.53898-1.95644-1.74185-3.39983-2.87489-4.33016-3.39983-4.86768-3.03007-10.00935-4.54545-15.42574-4.54545h-1.64609l-.21459.03565v-.03565l-.03565.03565h-.03635c-2.40937.0-5.32062.56058-8.73232 1.68244-1.81385.69199-3.63888 1.59856-5.47579 2.72042-1.16939.69199-2.79172 2.00397-4.86768 3.93664l-1.18127 1.28822c-4.55733 5.08226-6.836 10.90405-6.836 17.46535l.03565.39352h-.03635l.03565.03565v.03565c0 4.67686 1.95644 10.04501 5.86931 16.10584 3.17336 4.72439 5.51214 8.29127 7.01493 10.70135.52493.88351 1.03728 1.86068 1.53845 2.93501h-.03565c-3.19712-1.45527-6.17966-3.16147-8.94761-5.11791-2.09972-1.64609-3.80523-3.30546-5.11791-4.97462-1.5028-2.09972-2.61278-3.88911-3.32853-5.36885-.85904-1.67055-1.65868-3.75771-2.39819-6.26353-.42917-1.57479-.77517-3.2803-1.03798-5.11722l-.17894-1.96832h.03565l-.03565-.03635-.03495-1.82503v-1.00234l.03565-.03565-.03565-.03565v-.03565zm34.03601-22.7622h2.04032l.03565.07199.03635-.07199c1.59856.04753 3.65076.38164 6.15589 1.00234 2.17103.69199 3.97299 1.44339 5.40379 2.2549 1.33645.73952 2.86371 1.86138 4.58179 3.36418 2.14726 2.07597 3.53124 3.63888 4.15123 4.68874 1.16939 1.69432 2.07597 3.49558 2.72042 5.40449.52493 1.31198.89469 3.20901 1.10928 5.69038v.03565h-.03565l.03565.03565v1.32457c0 6.46554-2.67219 12.24049-8.01727 17.32206-2.4576 2.17103-4.0324 3.29288-4.72439 3.36418-.42917.19082-.89399.28588-1.39586.28588h-.07129c-1.5035.0-2.55336-.7514-3.14959-2.2549l-.17964-1.07363c0-1.57479 1.04986-2.82736 3.14959-3.75771.66822-.33481 1.44339-.93104 2.3262-1.79008 1.40844-1.47973 2.41007-2.83924 3.007-4.08063.5487-.9541 1.07363-2.28985 1.57479-4.00793.28588-1.40774.42917-2.42195.42917-3.04195h.03565l-.03565-.0727.03565-.17894v-1.93267l-.03565-.17894h.03565l-.03565-.14329c0-1.74185-.60811-3.84158-1.82503-6.29918-.59693-1.0974-1.46785-2.26679-2.61278-3.50747-1.21622-1.24068-2.24232-2.09972-3.0776-2.57713-3.38794-2.17103-6.76401-3.25724-10.12818-3.25724h-.10694l-.03635-.07199-.03565.07199h-.10764l-.03565-.07199-.03565.07199h-.39352l-.03635-.07199-.03565.07199h-.64446l-.21459.03565v-.03565c-1.5028.14329-2.67219.33411-3.50816.57247-4.00793 1.14492-7.13376 3.03007-9.37678 5.65473-1.28891 1.40774-2.29055 2.89866-3.0063 4.47346-.93034 2.17103-1.39586 4.21134-1.39586 6.12025v.7514l-.03565.03565.03565.03565v.07129c0 3.14959 1.19316 6.47812 3.57876 9.98559 6.06083 9.6389 10.72511 17.28641 13.99423 22.94114l-.03565.03565h-.03635c-4.17569-.38164-6.96741-.77517-8.37445-1.18057-5.55897-8.78056-8.67292-13.66012-9.34113-14.63729-2.95877-4.48604-4.79568-7.77892-5.51143-9.87865-.78775-2.36185-1.18127-4.80827-1.18127-7.33716.0-5.48767 1.80126-10.52241 5.40449-15.10351.5487-.71575 1.68174-1.8495 3.39983-3.39983 3.24536-2.57713 6.78777-4.28264 10.62935-5.11791 1.38467-.30685 3.0063-.52213 4.86768-.64096v.07199zM274.69654 205.06653h1.10998l.07199.07199.03565-.07199h.03565l.03635.07199.03565-.07199c1.04986.0 2.46949.25024 4.25957.7514 3.6263 1.28822 6.38236 3.67453 8.26751 7.15823 1.04986 2.17103 1.57479 4.29522 1.57479 6.37048v.21459c0 3.96111-1.7062 7.55175-5.11791 10.77264-1.43151 1.14562-2.7323 1.71809-3.90099 1.71809-1.45597.0-2.54148-.77517-3.25724-2.3262-.11883-.33411-.19012-.68011-.21459-1.03798.0-1.19246.88281-2.39749 2.64842-3.61441 1.26445-.85904 2.07597-1.8495 2.43314-2.97065.28658-.81151.42917-1.61045.42917-2.39819v-.14329c0-2.38631-1.04986-4.49792-3.14959-6.33484-1.38328-1.0261-3.10206-1.53915-5.15356-1.53915l-.28588.03565v-.03565l-.03635.03565h-.07199c-1.88444.0-3.69829.81081-5.43944 2.43314-1.40844 1.62233-2.11161 3.4837-2.11161 5.58343.0 1.78938 1.2288 4.42593 3.68641 7.90963 6.34672 9.99747 11.22628 17.88264 14.63729 23.65759-3.05383.81081-5.40379 1.21622-7.05059 1.21622-3.14959-4.5811-6.84788-10.4623-11.09487-17.64359-1.45527-2.43384-3.0776-4.95156-4.86698-7.55245-1.59856-2.48137-2.39889-5.07038-2.39889-7.76634.0-3.74582 1.37209-7.06247 4.11628-9.94925 1.47904-1.36021 2.82736-2.32689 4.04428-2.89866 2.17103-.90657 3.61511-1.36021 4.33016-1.36021.4061-.09506 1.19316-.19082 2.36254-.28588v.07199zm74.56087 55.60127c.0215.04174.0421.08398.06181.1267.01926.04277.0374.08599.05442.12966.01747.04366.03381.08771.04904.13215.01478.04448.02867.08926.04165.13436.01299.04515.02486.09058.0356.13631.0103.04573.0197.09168.02822.13785.00851.04618.0159.09253.02217.13907.00582.04653.01075.0932.01478.14001.00358.04676.00627.09361.00806.14054.00134.04694.00179.09385.00134.14074-89e-5.04694-.00291.09383-.00605.14068-.00313.04685-.00739.09358-.01277.14021-.00538.04667-.01186.09316-.01948.13947-.00761.04631-.01635.0924-.0262.13825-.00985.04591-.02083.09153-.03292.13684-.0121.04537-.0253.09038-.03964.13503-.01478.0447-.03023.08901-.04636.13295-.01657.04394-.03426.08745-.05307.13053-.01881.04304-.03852.08561-.05912.12771s-.04232.08369-.06516.12476c-.02284.04102-.0468.08147-.07188.12133-.02463.03986-.05038.07909-.07726.1177-.02642.03856-.05397.07648-.08263.11373-.02867.03722-.05822.07374-.08868.10957-.03046.03579-.06158.07081-.09338.10507-.03225.03426-.06516.06772-.09875.10037s-.06808.06445-.10346.0954c-.03538.03095-.07144.061-.10816.09015-.03673.0292-.07412.05746-.11219.08478-.03852.02736-.07748.05377-.1169.07921-.03941.02544-.0795.04989-.12025.07336-.21766.12585-.44809.22136-.69128.28652-.2432.06516-.49064.09775-.74234.09775H203.29356c-.04694.0-.09385-.00116-.14074-.00349-.04689-.00228-.0937-.00573-.14041-.01034-.04671-.00457-.09327-.0103-.13967-.0172-.04645-.0069-.09269-.01494-.13872-.02412-.04604-.00914-.09184-.01941-.13738-.03084-.04551-.01137-.09071-.02389-.13564-.03756-.04492-.01362-.08948-.02833-.13369-.04414-.04421-.01581-.08798-.03269-.13134-.05065-.0434-.01796-.08631-.03697-.12872-.05703-.04246-.02007-.08438-.04116-.12576-.06328-.04138-.02217-.0822-.0453-.12247-.0694-.04026-.02414-.07992-.04926-.11898-.07537-.03901-.02606-.07737-.05307-.11508-.08102-.03771-.028-.0747-.05686-.11098-.0866-.03628-.02979-.07182-.06044-.10661-.09197-.0348-.03153-.0688-.06389-.10198-.09707-.03319-.03319-.06554-.06718-.09707-.10198-.03153-.03475-.06217-.07029-.09191-.10661-.02979-.03628-.05867-.07327-.08666-.11098-.02795-.03771-.05495-.07607-.08102-.11508-.02611-.03905-.05121-.07871-.07531-.11898-.02414-.04022-.04727-.08104-.0694-.12247-.02213-.04138-.04324-.0833-.06335-.12576-.02007-.04241-.03908-.0853-.05703-.12865-.01796-.0434-.03484-.0872-.05065-.13141-.01581-.04416-.03052-.0887-.04414-.13362-.01366-.04492-.02618-.09015-.03756-.1357-.01142-.04555-.0217-.09134-.03084-.13738-.00918-.04604-.01722-.09226-.02412-.13866-.00685-.04645-.01259-.09302-.0172-.13974-.00462-.04671-.00806-.09352-.01034-.14041-.00233-.04689-.00349-.09381-.00349-.14074.0-.25175.03258-.4992.09775-.74234.06516-.2432.16067-.47378.28652-.69175l71.7064-124.19911c.02347-.04067.04792-.08073.07336-.12018.02544-.03946.05184-.07827.07921-.11643.02732-.03816.05558-.07563.08478-.11239.02916-.03677.0592-.0728.09015-.1081.03095-.03529.06275-.0698.0954-.10352.03265-.03372.0661-.06662.10037-.09868.03426-.03211.06929-.06335.10507-.09372.03579-.03037.07231-.05984.10957-.08841.03722-.02858.07513-.05623.11373-.08296.03861-.02669.07784-.05245.1177-.07726.03986-.02477.0803-.04855.12133-.07135.04102-.0228.08261-.04459.12476-.06536.0421-.02074.08467-.04044.12771-.05912.04308-.01867.0866-.03628.13053-.05281.04394-.01657.08823-.03202.13288-.04636.0447-.01438.08973-.02763.1351-.03977.04533-.01214.09094-.02318.13684-.03312.04586-.0099.09195-.01867.13825-.02633.04631-.00761.09278-.01411.1394-.01948.04667-.00538.09343-.00958.14027-.01263.0468-.00309.09367-.00502.14061-.00578.04694-76e-5.09387-38e-5.14081.00114.04689.00152.09374.00421.14054.00806.0468.00385.09347.00882.14001.01491.04653.00614.09289.01342.13907.02184.04618.00837.09213.01789.13785.02855.04573.01066.09116.02244.13631.03533.0451.0129.08988.02689.13436.04199.04443.01509.08848.03126.13215.0485.04366.01724.08686.03556.12959.05495.04277.01934.08503.03975.12677.0612.04178.02146.08299.04392.12361.06738.21802.1259.41604.27784.59408.45582.17798.17802.32993.37605.45582.59408l71.70627 124.19911c.02374.04062.04613.08182.06718.12361zM274.99998 143.5157l-66.73842 115.59433H341.7386z" data-paper-data='{"isPathIcon":true}'/></g></g></g></svg> <span class="text-uppercase fw-bold"></span>
	</a>

	<div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link active" href="/docs/"><span class="active">Documentation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/blog/"><span>Blog</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/community/"><span>Community</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				<a class="nav-link" href="https://github.com/josephbarnett/codeblind.ai">GitHub</a>
			</li>
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				<a class="nav-link" href="https://app.codeblind.ai/login">Login</a>
			</li>
			
		</ul>
	</div>
	<div class="navbar-nav mx-lg-2 d-none d-lg-block"></div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="/docs/installation/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Install and configure Code Blind on Kubernetes</h1>
<div class="lead">Instructions for creating a Kubernetes cluster and installing Code Blind.</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-6463ca879dc9c5ec43c8e77d4147e56c">Create Kubernetes Cluster</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>1.1: <a href="#pg-b64b5630d72ed25ece15506b5577563b">Google Kubernetes Engine</a></li>


    
  
    
    
	
<li>1.2: <a href="#pg-b92bbfd1ff6d688fa054f083c1f4c981">Amazon Elastic Kubernetes Service</a></li>


    
  
    
    
	
<li>1.3: <a href="#pg-5794c6009fa81061fd16c966496f5f31">Azure Kubernetes Service</a></li>


    
  
    
    
	
<li>1.4: <a href="#pg-bda448e72a77dd8564f18c2084b5c5eb">Minikube</a></li>


    
  

    </ul>
    
  
    
    
	
<li>2: <a href="#pg-f20510043e9f53d4f75643e9f0fd06f2">Install Code Blind</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.1: <a href="#pg-17a026f94c4ced8dd23deeb10b25eab5">Install Code Blind using YAML</a></li>


    
  
    
    
	
<li>2.2: <a href="#pg-3b82ee7f1edc04e876dc785596385caa">Install Code Blind using Helm</a></li>


    
  

    </ul>
    
  
    
    
	
<li>3: <a href="#pg-1ce1902627986754e63902ced859a973">Deploy Kubernetes cluster and install Code Blind using Terraform</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>3.1: <a href="#pg-4ebc8d21cb3a0bed08fa6069e0de7ccb">Installing Code Blind on Google Kubernetes Engine using Terraform</a></li>


    
  
    
    
	
<li>3.2: <a href="#pg-87b95dd171847daa29344497871d0251">Installing Code Blind on AWS Elastic Kubernetes Service using Terraform</a></li>


    
  
    
    
	
<li>3.3: <a href="#pg-bc8ff361c71609f0e8cdd22678d09ff8">Installing Code Blind on Azure Kubernetes Service using Terraform</a></li>


    
  

    </ul>
    
  
    
    
	
<li>4: <a href="#pg-34aceca87fb9ffae4f142749784a1ea1">Confirming Code Blind Installation</a></li>


    
  
    
    
	
<li>5: <a href="#pg-be3b0f3fd44e1d99c89c139c84e9d1fa">Upgrading Code Blind and Kubernetes</a></li>


    
  

    </ul>


<div class="content">
      <h2 id="usage-requirements">Usage Requirements</h2>
<ul>
<li><strong>Kubernetes cluster version 1.26, 1.27, 1.28</strong>
<ul>
<li><a href="https://cloud.google.com/kubernetes-engine/">Google Kubernetes Engine</a>,
<a href="https://azure.microsoft.com/en-us/services/kubernetes-service/">Azure Kubernetes Service</a>,
<a href="https://aws.amazon.com/eks/">Amazon EKS</a> and <a href="https://github.com/kubernetes/minikube">Minikube</a> are supported.</li>
<li>If you are creating and managing your own Kubernetes cluster, the
<a href="https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/#mutatingadmissionwebhook">MutatingAdmissionWebhook</a>, and
<a href="https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/#validatingadmissionwebhook">ValidatingAdmissionWebhook</a>
admission controllers are required.
<ul>
<li>We also recommend following the
<a href="https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/#is-there-a-recommended-set-of-admission-controllers-to-use">recommended set of admission controllers</a>.</li>
</ul>
</li>
</ul>
</li>
<li>Firewall access for the range of ports that Game Servers can be connected to in the cluster.</li>
<li>Game Servers must have the <a href="https://codeblind.ai/docs/guides/client-sdks/">game server SDK</a> integrated, to manage Game Server state, health checking, etc.</li>
</ul>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Warning</h4>

    This release has been tested against Kubernetes versions 1.26, 1.27, 1.28 on GKE. Other versions may work, but are unsupported. It is also likely that not all of these versions are supported by other cloud providers.

</div>

<h2 id="supported-container-architectures">Supported Container Architectures</h2>
<p>The following container operating systems and architectures can be utilised with Code Blind:</p>
<table>
<thead>
<tr>
<th>OS</th>
<th>Architecture</th>
<th>Support</th>
</tr>
</thead>
<tbody>
<tr>
<td>linux</td>
<td><code>amd64</code></td>
<td><strong>Stable</strong></td>
</tr>
<tr>
<td>linux</td>
<td><code>arm64</code></td>
<td>Alpha</td>
</tr>
<tr>
<td><a href="/docs/guides/windows-gameservers/">windows</a></td>
<td><code>amd64</code></td>
<td>Alpha</td>
</tr>
</tbody>
</table>
<p>For all the platforms in Alpha, we would appreciate testing and bug reports on any issue found.</p>
<h2 id="code-blind-and-kubernetes-supported-versions">Code Blind and Kubernetes Supported Versions</h2>
<p>Code Blind will support 3 releases of Kubernetes, targeting the newest version as being the <a href="https://cloud.google.com/kubernetes-engine/docs/release-notes#current_versions">latest available version in the GKE Rapid channel</a>. However, we will ensure that at least one of the 3 versions chosen for each Code Blind release is supported by each of the major cloud providers (EKS and AKS). The vendored version of client-go will be aligned with the middle of the three supported Kubernetes versions. When a new version of Code Blind supports new versions of Kubernetes, it is explicitly called out in the <a href="https://agones.dev/blog/releases/">release notes</a>.</p>
<p>The following table lists recent Code Blind versions and their corresponding required Kubernetes versions:</p>
<table>
<thead>
<tr>
<th>Code Blind version</th>
<th>Kubernetes version(s)</th>
</tr>
</thead>
<tbody>
<tr>
<td>1.38</td>
<td>1.26, 1.27, 1.28</td>
</tr>
<tr>
<td>1.37</td>
<td>1.26, 1.27, 1.28</td>
</tr>
<tr>
<td>1.36</td>
<td>1.26, 1.27, 1.28</td>
</tr>
<tr>
<td>1.35</td>
<td>1.25, 1.26, 1.27</td>
</tr>
<tr>
<td>1.34</td>
<td>1.25, 1.26, 1.27</td>
</tr>
<tr>
<td>1.33</td>
<td>1.25, 1.26, 1.27</td>
</tr>
<tr>
<td>1.32</td>
<td>1.24, 1.25, 1.26</td>
</tr>
<tr>
<td>1.31</td>
<td>1.24, 1.25, 1.26</td>
</tr>
<tr>
<td>1.30</td>
<td>1.23, 1.24, 1.25</td>
</tr>
<tr>
<td>1.29</td>
<td>1.24</td>
</tr>
<tr>
<td>1.28</td>
<td>1.23</td>
</tr>
<tr>
<td>1.27</td>
<td>1.23</td>
</tr>
<tr>
<td>1.26</td>
<td>1.23</td>
</tr>
<tr>
<td>1.25</td>
<td>1.22</td>
</tr>
<tr>
<td>1.24</td>
<td>1.22</td>
</tr>
<tr>
<td>1.23</td>
<td>1.22</td>
</tr>
<tr>
<td>1.22</td>
<td>1.21</td>
</tr>
<tr>
<td>1.21</td>
<td>1.21</td>
</tr>
</tbody>
</table>
<h2 id="separation-of-agones-from-gameserver-nodes">Best Practices</h2>
<!-- keep installation/#separation-of-agones-from-gameserver-nodes permalink -->
<p>For detailed guides on best practices running Code Blind in production, see <a href="/docs/guides/best-practices/">Best Practices</a>.</p>

</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-6463ca879dc9c5ec43c8e77d4147e56c">1 - Create Kubernetes Cluster</h1>
    <div class="lead">Instructions for creating a Kubernetes cluster to install Code Blind on.</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-b64b5630d72ed25ece15506b5577563b">1.1 - Google Kubernetes Engine</h1>
    <div class="lead">Follow these steps to create a <a href="https://cloud.google.com/kubernetes-engine/">Google Kubernetes Engine (GKE)</a> cluster for your Code Blind install.</div>
	<h2 id="before-you-begin">Before you begin</h2>
<p>Take the following steps to enable the Kubernetes Engine API:</p>
<ol>
<li>Visit the <a href="https://console.cloud.google.com/kubernetes/list">Kubernetes Engine</a> page in the Google Cloud Platform Console.</li>
<li>Create or select a project.</li>
<li>Wait for the API and related services to be enabled. This can take several minutes.</li>
<li><a href="https://support.google.com/cloud/answer/6293499#enable-billing">Enable billing</a> for your project.</li>
</ol>
<ul>
<li>If you are not an existing GCP user, you may be able to enroll for a $300 US <a href="https://cloud.google.com/free/">Free Trial</a> credit.</li>
</ul>
<h3 id="choosing-a-shell">Choosing a shell</h3>
<p>To complete this quickstart, we can use either <a href="https://cloud.google.com/shell/">Google Cloud Shell</a> or a local shell.</p>
<p>Google Cloud Shell is a shell environment for managing resources hosted on Google Cloud Platform (GCP). Cloud Shell comes preinstalled with the <a href="https://cloud.google.com/sdk/gcloud/"><code>gcloud</code></a> and <a href="https://kubernetes.io/docs/reference/kubectl/"><code>kubectl</code></a> command-line tools. <code>gcloud</code> provides the primary command-line interface for GCP, and <code>kubectl</code> provides the command-line interface for running commands against Kubernetes clusters.</p>
<p>If you prefer using your local shell, you must install the <code>gcloud</code> and <code>kubectl</code> command-line tools in your environment.</p>
<h4 id="cloud-shell">Cloud shell</h4>
<p>To launch Cloud Shell, perform the following steps:</p>
<ol>
<li>Go to <a href="https://console.cloud.google.com/home/dashboard">Google Cloud Platform Console</a></li>
<li>From the top-right corner of the console, click the
<strong>Activate Google Cloud Shell</strong> button: <img alt="cloud shell" src="../../../../images/cloud-shell.png"></li>
<li>A Cloud Shell session opens inside a frame at the bottom of the console. Use this shell to run <code>gcloud</code> and <code>kubectl</code> commands.</li>
</ol>
<h4 id="local-shell">Local shell</h4>
<p>To install <code>gcloud</code> and <code>kubectl</code>, perform the following steps:</p>
<ol>
<li><a href="https://cloud.google.com/sdk/docs/quickstarts">Install the Google Cloud SDK</a>, which includes the <code>gcloud</code> command-line tool.</li>
<li>Initialize some default configuration by running the following command.
<ul>
<li>When asked <code>Do you want to configure a default Compute Region and Zone? (Y/n)?</code>, enter <code>Y</code> and choose a zone in your geographical region of choice.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gcloud init
</span></span></code></pre></div></li>
<li>Install the <code>kubectl</code> command-line tool by running the following command:
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gcloud components install kubectl
</span></span></code></pre></div></li>
</ol>
<h3 id="choosing-a-regional-or-zonal-cluster">Choosing a Regional or Zonal Cluster</h3>
<p>You will need to pick a geographical region or zone where you want to deploy your cluster, and whether to
create a <a href="https://cloud.google.com/kubernetes-engine/docs/concepts/types-of-clusters">regional or zonal cluster</a>.
We recommend using a Regional cluster, as the zonal GKE control plane can go down temporarily to adjust for cluster resizing,
<a href="https://cloud.google.com/kubernetes-engine/docs/concepts/cluster-upgrades">automatic upgrades</a> and
<a href="https://cloud.google.com/kubernetes-engine/docs/concepts/maintenance-windows-and-exclusions#repairs">repairs</a>.</p>
<p>After choosing a cluster type, <a href="https://cloud.google.com/compute/docs/regions-zones/#available">choose a region or zone</a>. The region you chose is <code>COMPUTE_REGION</code> below.
(Note that if you chose a zone, replace <code>--region=[COMPUTE_REGION]</code> with <code>--zone=[COMPUTE_ZONE]</code> in commands below.)</p>
<h3 id="choosing-a-release-channel-and-optional-version">Choosing a Release Channel and Optional Version</h3>
<p>We recommend using the <code>regular</code> release channel, which offers a balance between stability and freshness.
If you&rsquo;d like to read more, see our guide on <a href="https://codeblind.ai/docs/guides/best-practices/gke/#release-channels">Release Channels</a>.
The release channel you chose is <code>RELEASE_CHANNEL</code> below.</p>
<p>(Optional) During cluster creation, to set a specific available version in the release channel, use the <code>--cluster-version=[VERSION]</code> flag, e.g. <code>--cluster-version=1.27</code>. Be sure to choose a <a href="/docs/installation/#usage-requirements">version supported by Code Blind</a>. (If you rely on release channels, the latest Code Blind release <a href="/docs/installation/#agones-and-kubernetes-supported-versions">should be supported</a> by the default versions of all channels.)</p>
<h3 id="choosing-a-gke-cluster-mode">Choosing a GKE cluster mode</h3>
<p>A <a href="https://cloud.google.com/kubernetes-engine/docs/concepts/cluster-architecture">cluster</a> consists of at least one <em>control plane</em> machine and multiple worker machines called <em>nodes</em>. In Google Kubernetes Engine, nodes are <a href="https://cloud.google.com/compute/docs/instances/">Compute Engine virtual machine</a> instances that run the Kubernetes processes necessary to make them part of the cluster.</p>
<p>Code Blind supports both GKE Standard mode and GKE Autopilot mode.
Code Blind <code>GameServer</code> and <code>Fleet</code> manifests that work on Standard are compatible
on Autopilot with some constraints, described in the following section. We recommend
running GKE Autopilot clusters, if you meet the constraints.</p>
<p>You can&rsquo;t convert existing Standard clusters to Autopilot; create new Autopilot
clusters instead.</p>
<h4 id="code-blind-on-gke-autopilot">Code Blind on GKE Autopilot</h4>
<p>Autopilot is GKE&rsquo;s fully-managed mode. GKE configures, maintains, scales, and
upgrades nodes for you, which can reduce your maintenance and operating
overhead. You only pay for the resources requested by your running Pods, and
you don&rsquo;t pay for unused node capacity or Kubernetes system workloads.</p>
<p>This section describes the Code Blind-specific considerations in Autopilot
clusters. For a general comparison between Autopilot and Standard, refer to
<a href="https://cloud.google.com/kubernetes-engine/docs/concepts/choose-cluster-mode">Choose a GKE mode of operation</a>.</p>
<p>Autopilot nodes are, by default, optimized for most workloads. If some of your
workloads have broad compute requirements such as Arm architecture or a minimum
CPU platform, you can also choose a
<a href="https://cloud.google.com/kubernetes-engine/docs/concepts/autopilot-compute-classes">compute class</a>
that meets that requirement. However, if you have specialized hardware needs
that require fine-grained control over machine configuration, consider using
GKE Standard.</p>
<p>Code Blind on Autopilot has pre-configured opinionated constraints. Evaluate
whether these constraints impact your workloads:</p>
<ul>
<li><strong>Operating system:</strong> No Windows containers.</li>
<li><strong>Resource requests:</strong> Autopilot has pre-determined
<a href="https://cloud.google.com/kubernetes-engine/docs/concepts/autopilot-resource-requests#min-max-requests">minimum Pod resource requests</a>.
If your game servers require less than those minimums, use GKE Standard.</li>
<li><strong><a href="https://codeblind.ai/docs/advanced/scheduling-and-autoscaling/#fleet-scheduling">Scheduling strategy</a>:</strong>
<code>Packed</code> is supported, which is the Code Blind default. <code>Distributed</code> is not
supported.</li>
<li><strong><a href="https://codeblind.ai/docs/reference/agones_crd_api_reference/#agones.dev/v1.GameServerPort">Host port policy</a>:</strong> <code>Dynamic</code> is supported, which is the Code Blind default.
<code>Static</code> and <code>Passthrough</code> are not supported.</li>
<li><strong>Seccomp profile:</strong> Code Blind sets the seccomp profile to <code>Unconfined</code> to
avoid unexpected container creation delays that might occur because
Autopilot enables the
<a href="https://cloud.google.com/kubernetes-engine/docs/concepts/seccomp-in-gke"><code>RuntimeDefault</code> seccomp profile</a>.</li>
<li><strong><a href="https://codeblind.ai/docs/advanced/controlling-disruption/#eviction-api">Pod disruption policy</a>:</strong>
<code>eviction.safe: Never</code> is supported, which is the Code Blind
default. <code>eviction.safe: Always</code> is supported. <code>eviction.safe: OnUpgrade</code> is
not supported. If your game sessions exceed one hour, refer to
<a href="https://codeblind.ai/docs/advanced/controlling-disruption/#considerations-for-long-sessions">Considerations for long sessions</a>.</li>
</ul>
<h3 id="choosing-a-gcp-network">Choosing a GCP network</h3>
<p>By default, <code>gcloud</code> and the Cloud Console use the VPC named <code>default</code> for all new resources. If you
plan to create a <a href="https://cloud.google.com/kubernetes-engine/docs/how-to/alias-ips#dual-stack">dual-stack IPv4/IPv6 cluster</a> cluster, special considerations need to
be made. Dual-stack clusters require a <a href="https://cloud.google.com/vpc/docs/subnets#subnet-types">dual-stack subnet</a>, which are only supported in
<a href="https://cloud.google.com/vpc/docs/vpc#subnet-ranges"><em>custom mode</em></a> VPC networks. For a new dual-stack cluster, you can either:</p>
<ul>
<li>
<p>create a new <em>custom mode</em> VPC,</p>
</li>
<li>
<p>or if you wish to continue using the <code>default</code> network, you must <a href="https://cloud.google.com/vpc/docs/create-modify-vpc-networks#switch-network-mode">switch it to <em>custom mode</em></a>.
After switching a network to custom mode, you will need to manually manage subnets within the <code>default</code> VPC.</p>
</li>
</ul>
<p>Once you have a <em>custom mode</em> VPC, you will need to choose whether to use an existing subnet or create a
new one - read <a href="https://cloud.google.com/kubernetes-engine/docs/how-to/alias-ips#dual-stack">VPC-native guide on creating a dual-stack cluster</a>, but don&rsquo;t create the cluster
just yet - we&rsquo;ll create the cluster later in this guide. To use the network and/or subnetwork you just created,
you&rsquo;ll need to add <code>--network</code> and <code>--subnetwork</code>, and for GKE Standard, possibly <code>--stack-type</code> and
<code>--ipv6-access-type</code>, depending on whether you created the subnet simultaneously with the cluster.</p>
<h2 id="creating-the-firewall">Creating the firewall</h2>
<p>We need a firewall to allow UDP traffic to nodes tagged as <code>game-server</code> via ports 7000-8000. These firewall rules apply to cluster nodes you will create in the
next section.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gcloud compute firewall-rules create game-server-firewall <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --allow udp:7000-8000 <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --target-tags game-server <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --description <span style="color:#4e9a06">&#34;Firewall to allow game server udp traffic&#34;</span>
</span></span></code></pre></div><h2 id="creating-the-cluster">Creating the cluster</h2>
<p>Create a GKE cluster in which you&rsquo;ll install Code Blind. You can use
<a href="/docs/installation/creating-cluster/gke/#create-a-standard-mode-cluster-for-agones">GKE Standard mode</a>
or <a href="/docs/installation/creating-cluster/gke/#create-an-autopilot-mode-cluster-for-agones">GKE Autopilot mode</a>.</p>
<h3 id="create-a-standard-mode-cluster-for-code-blind">Create a Standard mode cluster for Code Blind</h3>
<p>Create the cluster:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gcloud container clusters create <span style="color:#ce5c00;font-weight:bold">[</span>CLUSTER_NAME<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --region<span style="color:#ce5c00;font-weight:bold">=[</span>COMPUTE_REGION<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --release-channel<span style="color:#ce5c00;font-weight:bold">=[</span>RELEASE_CHANNEL<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --tags<span style="color:#ce5c00;font-weight:bold">=</span>game-server <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --scopes<span style="color:#ce5c00;font-weight:bold">=</span>gke-default <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --num-nodes<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">4</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --enable-image-streaming <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --machine-type<span style="color:#ce5c00;font-weight:bold">=</span>e2-standard-4
</span></span></code></pre></div><p>Replace the following:</p>
<ul>
<li><code>[CLUSTER_NAME]</code>: The name of the cluster you want to create</li>
<li><code>[COMPUTE_REGION]</code>: The GCP region to create the cluster in, <a href="/docs/installation/creating-cluster/gke/#choosing-a-gke-cluster-mode">chosen above</a></li>
<li><code>[RELEASE_CHANNEL]</code>: The GKE release channel, <a href="/docs/installation/creating-cluster/gke/#choosing-a-release-channel-and-optional-version">chosen above</a></li>
</ul>
<p>Flag explanations:</p>
<ul>
<li><code>--region</code>: The compute region <a href="/docs/installation/creating-cluster/gke/#choosing-a-gke-cluster-mode">you chose above</a>.</li>
<li><code>--release-channel</code>: The release channel <a href="/docs/installation/creating-cluster/gke/#choosing-a-release-channel-and-optional-version">you chose above</a>.</li>
<li><code>--tags</code>: Defines the tags that will be attached to new nodes in the cluster. This is to grant access through ports via the <a href="/docs/installation/creating-cluster/gke/#creating-the-firewall">firewall created above</a>.</li>
<li><code>--scopes</code>: Defines the Oauth scopes required by the nodes.</li>
<li><code>--num-nodes</code>: The number of nodes to be created in each of the cluster&rsquo;s zones. Default: 4. Depending on the needs of your game, this parameter should be adjusted.</li>
<li><code>--enable-image-streaming</code>: Use <a href="https://cloud.google.com/kubernetes-engine/docs/how-to/image-streaming">Image streaming</a> to pull container images, which leads to significant improvements in initialization times. <a href="https://cloud.google.com/kubernetes-engine/docs/how-to/image-streaming#limitations">Limitations</a> apply to enable this feature.</li>
<li><code>--machine-type</code>: The type of machine to use for nodes. Default: <code>e2-standard-4</code>. Depending on the needs of your game, you may wish to <a href="https://cloud.google.com/compute/docs/machine-types">have smaller or larger machines</a>.</li>
</ul>
<h4 id="optional-creating-a-dedicated-node-pool">(Optional) Creating a dedicated node pool</h4>
<p>Create a <a href="https://cloud.google.com/kubernetes-engine/docs/concepts/node-pools">dedicated node pool</a>
for the Code Blind resources to be installed in. If you skip this step, the Code Blind controllers will
share the default node pool with your game servers, which is fine for experimentation but not
recommended for a production deployment.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gcloud container node-pools create agones-system <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --cluster<span style="color:#ce5c00;font-weight:bold">=[</span>CLUSTER_NAME<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --region<span style="color:#ce5c00;font-weight:bold">=[</span>COMPUTE_REGION<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --node-taints agones.dev/agones-system<span style="color:#ce5c00;font-weight:bold">=</span>true:NoExecute <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --node-labels agones.dev/agones-system<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87">true</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --num-nodes<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">1</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --machine-type<span style="color:#ce5c00;font-weight:bold">=</span>e2-standard-4
</span></span></code></pre></div><p>Replace the following:</p>
<ul>
<li><code>[CLUSTER_NAME]</code>: The name of the cluster you created</li>
<li><code>[COMPUTE_REGION]</code>: The GCP region to create the cluster in, <a href="/docs/installation/creating-cluster/gke/#choosing-a-gke-cluster-mode">chosen above</a></li>
</ul>
<p>Flag explanations:</p>
<ul>
<li><code>--cluster</code>: The name of the cluster you created.</li>
<li><code>--region</code>: The compute region <a href="/docs/installation/creating-cluster/gke/#choosing-a-gke-cluster-mode">you chose above</a>.</li>
<li><code>--node-taints</code>: The Kubernetes taints to automatically apply to nodes in this node pool.</li>
<li><code>--node-labels</code>: The Kubernetes labels to automatically apply to nodes in this node pool.</li>
<li><code>--num-nodes</code>: The number of nodes per cluster zone. For regional clusters, <code>--num-nodes=1</code> creates one node in 3 separate zones in the region, giving you faster recovery time in the event of a node failure.</li>
<li><code>--machine-type</code>: The type of machine to use for nodes. Default: <code>e2-standard-4</code>. Depending on the needs of your game, you may wish to <a href="https://cloud.google.com/compute/docs/machine-types">have smaller or larger machines</a>.</li>
</ul>
<h4 id="optional-creating-a-metrics-node-pool">(Optional) Creating a metrics node pool</h4>
<p>Create a node pool for <a href="/docs/guides/metrics/">Metrics</a> if you want to monitor the
Code Blind system using Prometheus with Grafana or Cloud Logging and Monitoring.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gcloud container node-pools create agones-metrics <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --cluster<span style="color:#ce5c00;font-weight:bold">=[</span>CLUSTER_NAME<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --region<span style="color:#ce5c00;font-weight:bold">=[</span>COMPUTE_REGION<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --node-taints agones.dev/agones-metrics<span style="color:#ce5c00;font-weight:bold">=</span>true:NoExecute <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --node-labels agones.dev/agones-metrics<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87">true</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --num-nodes<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">1</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --machine-type<span style="color:#ce5c00;font-weight:bold">=</span>e2-standard-4
</span></span></code></pre></div><p>Replace the following:</p>
<ul>
<li><code>[CLUSTER_NAME]</code>: The name of the cluster you created</li>
<li><code>[COMPUTE_REGION]</code>: The GCP region to create the cluster in, <a href="/docs/installation/creating-cluster/gke/#choosing-a-gke-cluster-mode">chosen above</a></li>
</ul>
<p>Flag explanations:</p>
<ul>
<li><code>--cluster</code>: The name of the cluster you created.</li>
<li><code>--region</code>: The compute region <a href="/docs/installation/creating-cluster/gke/#choosing-a-gke-cluster-mode">you chose above</a>.</li>
<li><code>--node-taints</code>: The Kubernetes taints to automatically apply to nodes in this node pool.</li>
<li><code>--node-labels</code>: The Kubernetes labels to automatically apply to nodes in this node pool.</li>
<li><code>--num-nodes</code>: The number of nodes per cluster zone. For regional clusters, <code>--num-nodes=1</code> creates one node in 3 separate zones in the region, giving you faster recovery time in the event of a node failure.</li>
<li><code>--machine-type</code>: The type of machine to use for nodes. Default: <code>e2-standard-4</code>. Depending on the needs of your game, you may wish to <a href="https://cloud.google.com/compute/docs/machine-types">have smaller or larger machines</a>.</li>
</ul>
<h4 id="optional-creating-a-node-pool-for-windows">(Optional) Creating a node pool for Windows</h4>
<p>If you run game servers on Windows, you
need to create a dedicated node pool for those servers. Windows Server 2019 (<code>WINDOWS_LTSC_CONTAINERD</code>) is the recommended image for Windows
game servers.</p>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Warning</h4>

    Running <code>GameServers</code> on Windows nodes is currently Alpha. Feel free to file feedback
through <a href="https://github.com/googleforgames/agones/issues">Github issues</a>.

</div>

<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gcloud container node-pools create windows <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --cluster<span style="color:#ce5c00;font-weight:bold">=[</span>CLUSTER_NAME<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --region<span style="color:#ce5c00;font-weight:bold">=[</span>COMPUTE_REGION<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --image-type WINDOWS_LTSC_CONTAINERD <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --machine-type e2-standard-4 <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --num-nodes<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">4</span>
</span></span></code></pre></div><p>Replace the following:</p>
<ul>
<li><code>[CLUSTER_NAME]</code>: The name of the cluster you created</li>
<li><code>[COMPUTE_REGION]</code>: The GCP region to create the cluster in, <a href="/docs/installation/creating-cluster/gke/#choosing-a-gke-cluster-mode">chosen above</a></li>
</ul>
<p>Flag explanations:</p>
<ul>
<li><code>--cluster</code>: The name of the cluster you created.</li>
<li><code>--region</code>: The compute region <a href="/docs/installation/creating-cluster/gke/#choosing-a-gke-cluster-mode">you chose above</a>.</li>
<li><code>--image-type</code>: The image type of the instances in the node pool - <code>WINDOWS_LTSC_CONTAINERD</code> in this case.</li>
<li><code>--machine-type</code>: The type of machine to use for nodes. Default: <code>e2-standard-4</code>. Depending on the needs of your game, you may wish to <a href="https://cloud.google.com/compute/docs/machine-types">have smaller or larger machines</a>.</li>
<li><code>--num-nodes</code>: The number of nodes per cluster zone. For regional clusters, <code>--num-nodes=1</code> creates one node in 3 separate zones in the region, giving you faster recovery time in the event of a node failure.</li>
</ul>
<h3 id="create-an-autopilot-mode-cluster-for-code-blind">Create an Autopilot mode cluster for Code Blind</h3>


<div class="alert alert-info" role="alert">
<h4 class="alert-heading">Note</h4>

    These installation instructions apply to Code Blind 1.30+

</div>

<ol>
<li>
<p>Choose a <a href="https://codeblind.ai/docs/guides/best-practices/gke/#release-channels">Release Channel</a> (Autopilot clusters must be on a Release Channel).</p>
</li>
<li>
<p>Create the cluster:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gcloud container clusters create-auto <span style="color:#ce5c00;font-weight:bold">[</span>CLUSTER_NAME<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --region<span style="color:#ce5c00;font-weight:bold">=[</span>COMPUTE_REGION<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --release-channel<span style="color:#ce5c00;font-weight:bold">=[</span>RELEASE_CHANNEL<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --autoprovisioning-network-tags<span style="color:#ce5c00;font-weight:bold">=</span>game-server
</span></span></code></pre></div></li>
</ol>
<p>Replace the following:</p>
<ul>
<li><code>[CLUSTER_NAME]</code>: The name of your cluster.</li>
<li><code>[COMPUTE_REGION]</code>: the GCP region to create the cluster in.</li>
<li><code>[RELEASE_CHANNEL]</code>: one of <code>rapid</code>, <code>regular</code>, or <code>stable</code>, chosen <a href="/docs/installation/creating-cluster/gke/#choosing-a-release-channel-and-optional-version">above</a>. The default is <code>regular</code>.</li>
</ul>
<p>Flag explanations:</p>
<ul>
<li><code>--region</code>: The compute region <a href="/docs/installation/creating-cluster/gke/#choosing-a-gke-cluster-mode">you chose above</a>.</li>
<li><code>--release-channel</code>: The release channel <a href="/docs/installation/creating-cluster/gke/#choosing-a-release-channel-and-optional-version">you chose above</a>.</li>
<li><code>--autoprovisioning-network-tags</code>: Defines the tags that will be attached to new nodes in the cluster. This is to grant access through ports via the <a href="/docs/installation/creating-cluster/gke/#creating-the-firewall">firewall created above</a>.</li>
</ul>
<h2 id="setting-up-cluster-credentials">Setting up cluster credentials</h2>
<p><code>gcloud container clusters create</code> configurates credentials for <code>kubectl</code> automatically. If you ever lose those, run:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gcloud container clusters get-credentials <span style="color:#ce5c00;font-weight:bold">[</span>CLUSTER_NAME<span style="color:#ce5c00;font-weight:bold">]</span> --region<span style="color:#ce5c00;font-weight:bold">=[</span>COMPUTE_REGION<span style="color:#ce5c00;font-weight:bold">]</span>
</span></span></code></pre></div><h2 id="next-steps">Next Steps</h2>
<ul>
<li>Continue to <a href="/docs/installation/install-agones/">Install Code Blind</a>.</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-b92bbfd1ff6d688fa054f083c1f4c981">1.2 - Amazon Elastic Kubernetes Service</h1>
    <div class="lead">Follow these steps to create an <a href="https://aws.amazon.com/eks/">Amazon Elastic Kubernetes Service (EKS)</a> cluster for your Code Blind install.</div>
	<p>Create your EKS Cluster using the <a href="https://docs.aws.amazon.com/eks/latest/userguide/getting-started.html">Getting Started Guide</a>.</p>
<p>Possible steps are the following:</p>
<ol>
<li>Create new IAM role for cluster management.</li>
<li>Run <code>aws configure</code> to authorize your <code>awscli</code> with proper <code>AWS Access Key ID</code> and <code>AWS Secret Access Key</code>.</li>
<li>Create an example cluster:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>eksctl create cluster <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>--name prod <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>--version 1.28 <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>--nodegroup-name standard-workers <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>--node-type t3.medium <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>--nodes <span style="color:#0000cf;font-weight:bold">3</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>--nodes-min <span style="color:#0000cf;font-weight:bold">3</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>--nodes-max <span style="color:#0000cf;font-weight:bold">4</span>
</span></span></code></pre></div>

<div class="alert alert-info" role="alert">
<h4 class="alert-heading">Note</h4>

    EKS does not use the normal Kubernetes networking since it
is <a href="https://itnext.io/kubernetes-is-hard-why-eks-makes-it-easier-for-network-and-security-architects-ea6d8b2ca965">incompatible with Amazon VPC networking</a>.

</div>

<h2 id="allowing-udp-traffic">Allowing UDP Traffic</h2>
<p>For Code Blind to work correctly, we need to allow UDP traffic to pass through to our EKS cluster worker nodes. To achieve this, we must update the workers&rsquo; nodepool SG (Security Group) with the proper rule. A simple way to do that is:</p>
<ul>
<li>Log in to the AWS Management Console</li>
<li>Go to the VPC Dashboard and select <strong>Security Groups</strong></li>
<li>Find the Security Group for the workers nodepool, which will be named something like <code>eksctl-[cluster-name]-nodegroup-[cluster-name]-workers/SG</code></li>
<li>Select <strong>Inbound Rules</strong></li>
<li><strong>Edit Rules</strong> to add a new <strong>Custom UDP Rule</strong> with a 7000-8000 port range and an appropriate <strong>Source</strong> CIDR range (<code>0.0.0.0/0</code> allows all traffic)</li>
</ul>
<h2 id="next-steps">Next Steps</h2>
<ul>
<li>Continue to <a href="/docs/installation/install-agones/">Install Code Blind</a>.</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-5794c6009fa81061fd16c966496f5f31">1.3 - Azure Kubernetes Service</h1>
    <div class="lead">Follow these steps to create an <a href="https://docs.microsoft.com/azure/aks/">Azure Kubernetes Service (AKS) </a> cluster  for your Code Blind install.</div>
	<h2 id="choosing-your-shell">Choosing your shell</h2>
<p>You can use either <a href="https://docs.microsoft.com/azure/cloud-shell/overview">Azure Cloud Shell</a> or install the <a href="https://docs.microsoft.com/cli/azure/?view=azure-cli-latest">Azure CLI</a> on your local shell in order to install AKS in your own Azure subscription. Cloud Shell comes preinstalled with <code>az</code> and <code>kubectl</code> utilities whereas you need to install them locally if you want to use your local shell. If you use Windows 10, you can use the <a href="https://docs.microsoft.com/windows/wsl/install-win10">WIndows Subsystem for Windows</a> as well.</p>
<h2 id="creating-the-aks-cluster">Creating the AKS cluster</h2>
<p>If you are using Azure CLI from your local shell, you need to log in to your Azure account by executing the <code>az login</code> command and following the login procedure.</p>
<p>Here are the steps you need to follow to create a new AKS cluster (additional instructions and clarifications are listed <a href="https://docs.microsoft.com/azure/aks/kubernetes-walkthrough">here</a>):</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Declare necessary variables, modify them according to your needs</span>
</span></span><span style="display:flex;"><span><span style="color:#000">AKS_RESOURCE_GROUP</span><span style="color:#ce5c00;font-weight:bold">=</span>akstestrg     <span style="color:#8f5902;font-style:italic"># Name of the resource group your AKS cluster will be created in</span>
</span></span><span style="display:flex;"><span><span style="color:#000">AKS_NAME</span><span style="color:#ce5c00;font-weight:bold">=</span>akstest                 <span style="color:#8f5902;font-style:italic"># Name of your AKS cluster</span>
</span></span><span style="display:flex;"><span><span style="color:#000">AKS_LOCATION</span><span style="color:#ce5c00;font-weight:bold">=</span>westeurope          <span style="color:#8f5902;font-style:italic"># Azure region in which you&#39;ll deploy your AKS cluster</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Create the Resource Group where your AKS resource will be installed</span>
</span></span><span style="display:flex;"><span>az group create --name <span style="color:#000">$AKS_RESOURCE_GROUP</span> --location <span style="color:#000">$AKS_LOCATION</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Create the AKS cluster - this might take some time. Type &#39;az aks create -h&#39; to see all available options</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># The following command will create a four Node AKS cluster. Node size is Standard A1 v1 and Kubernetes version is 1.28.0. Plus, SSH keys will be generated for you, use --ssh-key-value to provide your values</span>
</span></span><span style="display:flex;"><span>az aks create --resource-group <span style="color:#000">$AKS_RESOURCE_GROUP</span> --name <span style="color:#000">$AKS_NAME</span> --node-count <span style="color:#0000cf;font-weight:bold">4</span> --generate-ssh-keys --node-vm-size Standard_A4_v2 --kubernetes-version 1.28.0 --enable-node-public-ip
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Install kubectl</span>
</span></span><span style="display:flex;"><span>sudo az aks install-cli
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Get credentials for your new AKS cluster</span>
</span></span><span style="display:flex;"><span>az aks get-credentials --resource-group <span style="color:#000">$AKS_RESOURCE_GROUP</span> --name <span style="color:#000">$AKS_NAME</span>
</span></span></code></pre></div><p>Alternatively, you can use the <a href="https://portal.azure.com">Azure Portal</a> to create a new AKS cluster <a href="https://docs.microsoft.com/azure/aks/kubernetes-walkthrough-portal">(instructions)</a>.</p>
<h3 id="allowing-udp-traffic">Allowing UDP traffic</h3>
<p>For Code Blind to work correctly, we need to allow UDP traffic to pass through to our AKS cluster. To achieve this, we must update the NSG (Network Security Group) with the proper rule. A simple way to do that is:</p>
<ul>
<li>Log in to the <a href="https://portal.azure.com/">Azure Portal</a></li>
<li>Find the resource group where the AKS(Azure Kubernetes Service) resources are kept, which should have a name like <code>MC_resourceGroupName_AKSName_westeurope</code>. Alternative, you can type <code>az resource show --namespace Microsoft.ContainerService --resource-type managedClusters -g $AKS_RESOURCE_GROUP -n $AKS_NAME -o json | jq .properties.nodeResourceGroup</code></li>
<li>Find the Network Security Group object, which should have a name like <code>aks-agentpool-********-nsg</code> (ie. aks-agentpool-55978144-nsg for dns-name-prefix agones)</li>
<li>Select <strong>Inbound Security Rules</strong></li>
<li>Select <strong>Add</strong> to create a new Rule with <strong>UDP</strong> as the protocol and <strong>7000-8000</strong> as the Destination Port Ranges. Pick a proper name and leave everything else at their default values</li>
</ul>
<p>Alternatively, you can use the following command, after modifying the <code>RESOURCE_GROUP_WITH_AKS_RESOURCES</code> and <code>NSG_NAME</code> values:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>az network nsg rule create <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --resource-group RESOURCE_GROUP_WITH_AKS_RESOURCES <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --nsg-name NSG_NAME <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --name AgonesUDP <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --access Allow <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --protocol Udp <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --direction Inbound <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --priority <span style="color:#0000cf;font-weight:bold">520</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --source-port-range <span style="color:#4e9a06">&#34;*&#34;</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --destination-port-range 7000-8000
</span></span></code></pre></div><h3 id="getting-public-ips-to-nodes">Getting Public IPs to Nodes</h3>
<h4 id="kubernetes-version-prior-to-11819-11911-and-1207">Kubernetes version prior to 1.18.19, 1.19.11 and 1.20.7</h4>
<p>To find a resource&rsquo;s public IP, search for <a href="https://portal.azure.com/#blade/HubsExtension/BrowseResourceBlade/resourceType/Microsoft.Compute%2FvirtualMachineScaleSets">Virtual Machine Scale Sets</a> -&gt; click on the set name(inside  <code>MC_resourceGroupName_AKSName_westeurope</code> group) -&gt; click <code>Instances</code> -&gt; click on the instance name -&gt; view <code>Public IP address</code>.</p>
<p>To get public IP via API <a href="https://github.com/Azure/azure-libraries-for-net/issues/1185#issuecomment-747919226">look here</a>.</p>
<p>For more information on Public IPs for VM NICs, see <a href="https://docs.microsoft.com/azure/virtual-network/virtual-network-network-interface-addresses">this document</a>.</p>
<h4 id="kubernetes-version-starting-11819-11911-and-1207">Kubernetes version starting 1.18.19, 1.19.11 and 1.20.7</h4>
<p>Virtual Machines public IP is available directly in Kubernetes EXTERNAL-IP.</p>
<h2 id="next-steps">Next Steps</h2>
<ul>
<li>Continue to <a href="/docs/installation/install-agones/">Install Code Blind</a>.</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-bda448e72a77dd8564f18c2084b5c5eb">1.4 - Minikube</h1>
    <div class="lead">Follow these steps to create a <a href="https://github.com/kubernetes/minikube">Minikube</a> cluster for your Code Blind install.</div>
	<h2 id="installing-minikube">Installing Minikube</h2>
<p>First, <a href="https://minikube.sigs.k8s.io/docs/start/">install Minikube</a>, which may also require you to install
a virtualisation solution, such as <a href="https://www.virtualbox.org">VirtualBox</a> as well.</p>
<h2 id="starting-minikube">Starting Minikube</h2>
<p>Minikube will need to be started with the supported version of Kubernetes that is supported with Code Blind, via the
<code>--kubernetes-version</code> command line flag.</p>
<p>Optionally, we also recommend starting with an <code>agones</code> profile, using <code>-p</code> to keep this cluster separate from any other
clusters you may have running with Minikube.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>minikube start --kubernetes-version v1.27.6 -p agones
</span></span></code></pre></div><p>Check the official <a href="https://minikube.sigs.k8s.io/docs/commands/start/">minikube start</a> reference for more options that
may be required for your platform of choice.</p>


<div class="alert alert-info" role="alert">
<h4 class="alert-heading">Note</h4>

    <p>You may need to increase the <code>--cpu</code> or <code>--memory</code> values for your minikube instance, depending on what resources are
available on the host and/or how many GameServers you wish to run locally.</p>
<p>Depending on your Operating System, you may also need to change the <code>--driver</code>
(<a href="https://minikube.sigs.k8s.io/docs/drivers/">driver list</a>) to enable <code>GameServer</code> connectivity with or without
some workarounds listed below.</p>


</div>

<h3 id="known-working-drivers">Known working drivers</h3>
<p>Other operating systems and drivers may work, but at this stage have not been verified to work with UDP connections
via Code Blind exposed ports.</p>
<p><strong>Linux (amd64)</strong></p>
<ul>
<li>Docker (default)</li>
<li>kvm2</li>
</ul>
<p><strong>Mac (amd64)</strong></p>
<ul>
<li>Docker (default)</li>
<li>Hyperkit</li>
</ul>
<p><strong>Windows (amd64)</strong></p>
<ul>
<li>hyper-v (might need
<a href="https://blog.thepolyglotprogrammer.com/setting-up-kubernetes-on-wsl-to-work-with-minikube-on-windows-10-90dac3c72fa1">this blog post</a>
and/or <a href="https://github.com/microsoft/WSL/issues/4288#issuecomment-652259640">this comment</a> for WSL support)</li>
</ul>
<p><em>If you have successfully tested with other platforms and drivers, please click &ldquo;edit this page&rdquo; in the top right hand
side and submit a pull request to let us know.</em></p>
<h2 id="local-connection-workarounds">Local connection workarounds</h2>
<p>Depending on your operating system and virtualization platform that you are using with Minikube, it may not be
possible to connect directly to a <code>GameServer</code> hosted on Code Blind as you would on a cloud hosted Kubernetes cluster.</p>
<p>If you are unable to do so, the following workarounds are available, and may work on your platform:</p>
<h3 id="minikube-ip">minikube ip</h3>
<p>Rather than using the published IP of a <code>GameServer</code> to connect, run <code>minikube ip -p agones</code> to get the local IP for
the minikube node, and connect to that address.</p>
<h3 id="create-a-service">Create a service</h3>
<p>This would only be for local development, but if none of the other workarounds work, creating a Service for the
<code>GameServer</code> you wish to connect to is a valid solution, to tunnel traffic to the appropriate GameServer container.</p>
<p>Use the following yaml:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">apiVersion</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">v1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">kind</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Service</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">metadata</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">agones-gameserver</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">spec</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">type</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">LoadBalancer</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">selector</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">agones.dev/gameserver</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">${GAMESERVER_NAME}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">ports</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">protocol</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">UDP</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">7000</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># local port</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">targetPort</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">${GAMESERVER_CONTAINER_PORT}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>Where <code>${GAMESERVER_NAME}</code> is replaced with the GameServer you wish to connect to, and <code>${GAMESERVER_CONTAINER_PORT}</code>
is replaced with the container port GameServer exposes for connection.</p>
<p>Running <code>minikube service list -p agones</code> will show you the IP and port to connect to locally in the <code>URL</code> field.</p>
<p>To connect to a different <code>GameServer</code>, run <code>kubectl edit service agones-gameserver</code> and edit the <code>${GAMESERVER_NAME}</code>
value to point to the new <code>GameServer</code> instance and/or the <code>${GAMESERVER_CONTAINER_PORT}</code> value as appropriate.</p>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Warning</h4>

    <code>minikube tunnel</code> (<a href="https://minikube.sigs.k8s.io/docs/handbook/accessing/">docs</a>)
does not support UDP (<a href="https://github.com/kubernetes/minikube/issues/12362">Github Issue</a>) on some combination of
operating system, platforms and drivers, but is required when using the <code>Service</code> workaround.

</div>

<h3 id="use-a-different-driver">Use a different driver</h3>
<p>If you cannot connect through the <code>Service</code>or use other workarounds, you may want to try a different
<a href="https://minikube.sigs.k8s.io/docs/drivers/">minikube driver</a>, and if that doesn&rsquo;t work, connection via UDP may not
be possible with minikube, and you may want to try either a
<a href="https://kubernetes.io/docs/tasks/tools/">different local Kubernetes tool</a> or use a cloud hosted Kubernetes cluster.</p>
<h2 id="next-steps">Next Steps</h2>
<ul>
<li>Continue to <a href="/docs/installation/install-agones/">Install Code Blind</a>.</li>
</ul>

</div>



    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-f20510043e9f53d4f75643e9f0fd06f2">2 - Install Code Blind</h1>
    <div class="lead">Install Code Blind in your existing Kubernetes cluster.</div>
	<p>If you have not yet created a cluster, <a href="https://codeblind.ai/docs/installation/creating-cluster/">follow the instructions</a>
for the environment where you will be running Code Blind.</p>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-17a026f94c4ced8dd23deeb10b25eab5">2.1 - Install Code Blind using YAML</h1>
    <div class="lead">We can install Code Blind to the cluster using an install.yaml file.</div>
	<h2 id="installing-code-blind">Installing Code Blind</h2>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Warning</h4>

    <p>Installing Code Blind with the <code>install.yaml</code> file will use pre-generated, well known TLS
certificates stored in this repository for securing Kubernetes webhooks communication.</p>
<p>For production workloads, we <strong>strongly</strong> recommend using the
<a href="/docs/installation/install-agones/helm/">helm installation</a> which allows you to generate
new, unique certificates or provide your own certificates. Alternatively,
you can use <code>helm template</code> as described <a href="/#customizing-your-install">below</a>
to generate a custom yaml installation file with unique certificates.</p>


</div>

<p>Installing Code Blind using the pre-generated <code>install.yaml</code> file is the quickest,
simplest way to get Code Blind up and running in your Kubernetes cluster:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl create namespace agones-system
</span></span><span style="display:flex;"><span>kubectl apply --server-side -f https://raw.githubusercontent.com/googleforgames/agones/release-1.38.0/install/yaml/install.yaml
</span></span></code></pre></div><p>You can also find the <code>install.yaml</code> in the latest <code>agones-install</code> zip from the <a href="https://github.com/googleforgames/agones/releases">releases</a> archive.</p>
<h3 id="customizing-your-install">Customizing your install</h3>
<p>To change the <a href="https://agones.dev/docs/installation/install-agones/helm/#configuration">configurable parameters</a>
in the <code>install.yaml</code> file, you can use <code>helm template</code> to generate a custom file locally
without needing to use helm to install Code Blind into your cluster.</p>
<p>The following example sets the <code>featureGates</code> and <code>generateTLS</code> helm parameters
and creates a customized <code>install-custom.yaml</code> file (note that the <code>pull</code>
command was introduced in Helm version 3):</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>helm pull --untar https://agones.dev/chart/stable/agones-1.38.0.tgz <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span><span style="color:#204a87">cd</span> agones <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>helm template agones-manual --namespace agones-system  . <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --set agones.controller.generateTLS<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87">false</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --set agones.allocator.generateTLS<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87">false</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --set agones.allocator.generateClientTLS<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87">false</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --set agones.crds.cleanupOnDelete<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87">false</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --set agones.featureGates<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;PlayerTracking=true&#34;</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  &gt; install-custom.yaml
</span></span></code></pre></div><h2 id="uninstalling-code-blind">Uninstalling Code Blind</h2>
<p>To uninstall/delete the <code>Code Blind</code> deployment and delete <code>agones-system</code> namespace:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl delete fleets --all --all-namespaces
</span></span><span style="display:flex;"><span>kubectl delete gameservers --all --all-namespaces
</span></span><span style="display:flex;"><span>kubectl delete -f https://raw.githubusercontent.com/googleforgames/agones/release-1.38.0/install/yaml/install.yaml
</span></span><span style="display:flex;"><span>kubectl delete namespace agones-system
</span></span></code></pre></div><p>Note: It may take a couple of minutes until all resources described in <code>install.yaml</code> file are deleted.</p>
<h2 id="next-steps">Next Steps</h2>
<ul>
<li><a href="/docs/installation/confirm/">Confirm Code Blind is up and running</a></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-3b82ee7f1edc04e876dc785596385caa">2.2 - Install Code Blind using Helm</h1>
    <div class="lead">Install Code Blind on a <a href="http://kubernetes.io">Kubernetes</a> cluster using the <a href="https://helm.sh">Helm</a> package manager.</div>
	<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li><a href="https://helm.sh/">Helm</a> package manager 3.2.3+</li>
<li><a href="/docs/installation/#usage-requirements">Supported Kubernetes Cluster</a></li>
</ul>
<h2 id="helm-3">Helm 3</h2>
<h3 id="installing-the-chart">Installing the Chart</h3>
<p>To install the chart with the release name <code>my-release</code> using our stable helm repository:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>helm repo add agones https://agones.dev/chart/stable
</span></span><span style="display:flex;"><span>helm repo update
</span></span><span style="display:flex;"><span>helm install my-release --namespace agones-system --create-namespace agones/agones
</span></span></code></pre></div><p><em>We recommend installing Code Blind in its own namespaces, such as <code>agones-system</code> as shown above.
If you want to use a different namespace, you can use the helm <code>--namespace</code> parameter to specify.</em></p>
<p>When running in production, Code Blind should be scheduled on a dedicated pool of nodes, distinct from where Game Servers are scheduled for better isolation and resiliency. By default Code Blind prefers to be scheduled on nodes labeled with <code>agones.dev/agones-system=true</code> and tolerates node taint <code>agones.dev/agones-system=true:NoExecute</code>. If no dedicated nodes are available, Code Blind will
run on regular nodes, but that&rsquo;s not recommended for production use. For instructions on setting up a dedicated node
pool for Code Blind, see the <a href="/docs/installation/">Code Blind installation instructions</a> for your preferred environment.</p>
<p>The command deploys Code Blind on the Kubernetes cluster with the default configuration. The <a href="/docs/installation/install-agones/helm/#configuration">configuration</a> section lists the parameters that can be configured during installation.</p>


<div class="alert alert-info" role="alert">
<h4 class="alert-heading">Tip</h4>

    List all releases using <code>helm list --all-namespaces</code>

</div>

<h3 id="namespaces">Namespaces</h3>
<p>By default Code Blind is configured to work with game servers deployed in the <code>default</code> namespace. If you are planning to use another namespace you can configure Code Blind via the parameter <code>gameservers.namespaces</code>.</p>
<p>For example to use <code>default</code> <strong>and</strong> <code>xbox</code> namespaces:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl create namespace xbox
</span></span><span style="display:flex;"><span>helm install my-release agones/agones --set <span style="color:#4e9a06">&#34;gameservers.namespaces={default,xbox}&#34;</span> --namespace agones-system
</span></span></code></pre></div>

<div class="alert alert-info" role="alert">
<h4 class="alert-heading">Note</h4>

    You need to create your namespaces before installing Code Blind.

</div>

<p>If you want to add a new namespace afterward upgrade your release:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl create namespace ps4
</span></span><span style="display:flex;"><span>helm upgrade my-release agones/agones --reuse-values --set <span style="color:#4e9a06">&#34;gameservers.namespaces={default,xbox,ps4}&#34;</span> --namespace agones-system
</span></span></code></pre></div><h3 id="uninstalling-the-chart">Uninstalling the Chart</h3>
<p>To uninstall/delete the <code>my-release</code> deployment:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>helm uninstall my-release --namespace<span style="color:#ce5c00;font-weight:bold">=</span>agones-system
</span></span></code></pre></div><h2 id="rbac">RBAC</h2>
<p>By default, <code>agones.rbacEnabled</code> is set to true. This enables RBAC support in Code Blind and must be true if RBAC is enabled in your cluster.</p>
<p>The chart will take care of creating the required service accounts and roles for Code Blind.</p>
<p>If you have RBAC disabled, or to put it another way, ABAC enabled, you should set this value to <code>false</code>.</p>
<h2 id="configuration">Configuration</h2>
<p>The following tables lists the configurable parameters of the Code Blind chart and their default values.</p>
<h3 id="general">General</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>agones.featureGates</code></td>
<td>A URL query encoded string of Flags to enable/disable e.g. <code>Example=true&amp;OtherThing=false</code>. Any value accepted by <a href="https://golang.org/pkg/strconv/#ParseBool">strconv.ParseBool(string)</a> can be used as a boolean value</td>
<td>``</td>
</tr>
<tr>
<td><code>agones.rbacEnabled</code></td>
<td>Creates RBAC resources. Must be set for any cluster configured with RBAC</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>agones.registerWebhooks</code></td>
<td>Registers the webhooks used for the admission controller</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>agones.registerApiService</code></td>
<td>Registers the apiservice(s) used for the Kubernetes API extension</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>agones.registerServiceAccounts</code></td>
<td>Attempts to create service accounts for the controllers</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>agones.createPriorityClass</code></td>
<td>Attempts to create priority classes for the controllers</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>agones.priorityClassName</code></td>
<td>Name of the priority classes to create</td>
<td><code>agones-system</code></td>
</tr>
<tr>
<td><code>agones.requireDedicatedNodes</code></td>
<td>Forces Code Blind system components to be scheduled on dedicated nodes, only applies to the GKE Standard without node auto-provisioning</td>
<td><code>false</code></td>
</tr>
</tbody>
</table>
<h3 id="custom-resource-definitions">Custom Resource Definitions</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>agones.crds.install</code></td>
<td>Install the CRDs with this chart. Useful to disable if you want to subchart (since crd-install hook is broken), so you can copy the CRDs into your own chart.</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>agones.crds.cleanupOnDelete</code></td>
<td>Run the pre-delete hook to delete all GameServers and their backing Pods when deleting the helm chart, so that all CRDs can be removed on chart deletion</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>agones.crds.cleanupJobTTL</code></td>
<td>The number of seconds for Kubernetes to delete the associated Job and Pods of the pre-delete hook after it completes, regardless if the Job is successful or not. Set to <code>0</code> to disable cleaning up the Job or the associated Pods.</td>
<td><code>60</code></td>
</tr>
</tbody>
</table>
<h3 id="metrics">Metrics</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>agones.metrics.prometheusServiceDiscovery</code></td>
<td>Adds annotations for Prometheus ServiceDiscovery (and also Strackdriver)</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>agones.metrics.prometheusEnabled</code></td>
<td>Enables controller metrics on port <code>8080</code> and path <code>/metrics</code></td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>agones.metrics.stackdriverEnabled</code></td>
<td>Enables Stackdriver exporter of controller metrics</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>agones.metrics.stackdriverProjectID</code></td>
<td>This overrides the default gcp project id for use with stackdriver</td>
<td>``</td>
</tr>
<tr>
<td><code>agones.metrics.stackdriverLabels</code></td>
<td>A set of default labels to add to all stackdriver metrics generated in form of key value pair (<code>key=value,key2=value2</code>). By default metadata are automatically added using Kubernetes API and GCP metadata enpoint.</td>
<td>``</td>
</tr>
<tr>
<td><code>agones.metrics.serviceMonitor.interval</code></td>
<td>Default scraping interval for ServiceMonitor</td>
<td><code>30s</code></td>
</tr>
</tbody>
</table>
<h3 id="service-accounts">Service Accounts</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>agones.serviceaccount.controller.name</code></td>
<td>Service account name for the controller</td>
<td><code>agones-controller</code></td>
</tr>
<tr>
<td><code>agones.serviceaccount.controller.annotations</code></td>
<td><a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/">Annotations</a> added to the Code Blind controller service account</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.serviceaccount.sdk.name</code></td>
<td>Service account name for the sdk</td>
<td><code>agones-sdk</code></td>
</tr>
<tr>
<td><code>agones.serviceaccount.sdk.annotations</code></td>
<td>A map of namespaces to maps of <a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/">Annotations</a> added to the Code Blind SDK service account for the specified namespaces</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.serviceaccount.allocator.name</code></td>
<td>Service account name for the allocator</td>
<td><code>agones-allocator</code></td>
</tr>
<tr>
<td><code>agones.serviceaccount.allocator.annotations</code></td>
<td><a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/">Annotations</a> added to the Code Blind allocator service account</td>
<td><code>{}</code></td>
</tr>
</tbody>
</table>
<h3 id="container-images">Container Images</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>agones.image.registry</code></td>
<td>Global image registry for all the Code Blind system images</td>
<td><code>us-docker.pkg.dev/agones-images/release</code></td>
</tr>
<tr>
<td><code>agones.image.tag</code></td>
<td>Global image tag for all images</td>
<td><code>1.38.0</code></td>
</tr>
<tr>
<td><code>agones.image.controller.name</code></td>
<td>Image name for the controller</td>
<td><code>agones-controller</code></td>
</tr>
<tr>
<td><code>agones.image.controller.pullPolicy</code></td>
<td>Image pull policy for the controller</td>
<td><code>IfNotPresent</code></td>
</tr>
<tr>
<td><code>agones.image.controller.pullSecret</code></td>
<td>Image pull secret for the controller, allocator, sdk and ping image. Should be created both in <code>agones-system</code> and <code>default</code> namespaces</td>
<td>``</td>
</tr>
<tr>
<td><code>agones.image.sdk.name</code></td>
<td>Image name for the sdk</td>
<td><code>agones-sdk</code></td>
</tr>
<tr>
<td><code>agones.image.sdk.tag</code></td>
<td>Image tag for the sdk</td>
<td>value of <code>agones.image.tag</code></td>
</tr>
<tr>
<td><code>agones.image.sdk.cpuRequest</code></td>
<td>The <a href="https://kubernetes.io/docs/tasks/administer-cluster/manage-resources/cpu-constraint-namespace/">cpu request</a> for sdk server container</td>
<td><code>30m</code></td>
</tr>
<tr>
<td><code>agones.image.sdk.cpuLimit</code></td>
<td>The <a href="https://kubernetes.io/docs/tasks/administer-cluster/manage-resources/cpu-constraint-namespace/">cpu limit</a> for the sdk server container</td>
<td><code>0</code> (none)</td>
</tr>
<tr>
<td><code>agones.image.sdk.memoryRequest</code></td>
<td>The <a href="https://kubernetes.io/docs/tasks/administer-cluster/manage-resources/memory-constraint-namespace/">memory request</a> for sdk server container</td>
<td><code>0</code> (none)</td>
</tr>
<tr>
<td><code>agones.image.sdk.memoryLimit</code></td>
<td>The <a href="https://kubernetes.io/docs/tasks/administer-cluster/manage-resources/memory-constraint-namespace/">memory limit</a> for the sdk server container</td>
<td><code>0</code> (none)</td>
</tr>
<tr>
<td><code>agones.image.sdk.alwaysPull</code></td>
<td>Tells if the sdk image should always be pulled</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>agones.image.ping.name</code></td>
<td>Image name for the ping service</td>
<td><code>agones-ping</code></td>
</tr>
<tr>
<td><code>agones.image.ping.tag</code></td>
<td>Image tag for the ping service</td>
<td>value of <code>agones.image.tag</code></td>
</tr>
<tr>
<td><code>agones.image.ping.pullPolicy</code></td>
<td>Image pull policy for the ping service</td>
<td><code>IfNotPresent</code></td>
</tr>
<tr>
<td><code>agones.image.extensions.name</code></td>
<td>Image name for extensions</td>
<td><code>agones-extensions</code></td>
</tr>
<tr>
<td><code>agones.image.extensions.pullPolicy</code></td>
<td>Image pull policy for extensions</td>
<td><code>IfNotPresent</code></td>
</tr>
</tbody>
</table>
<h3 id="code-blind-controller">Code Blind Controller</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>agones.controller.replicas</code></td>
<td>The number of replicas to run in the <code>agones-controller</code> deployment.</td>
<td><code>2</code></td>
</tr>
<tr>
<td><code>agones.controller.pdb.minAvailable</code></td>
<td>Description of the number of pods from that set that must still be available after the eviction, even in the absence of the evicted pod. Can be either an absolute number or a percentage. Mutually Exclusive with <code>maxUnavailable</code></td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>agones.controller.pdb.maxUnavailable</code></td>
<td>Description of the number of pods from that set that can be unavailable after the eviction. It can be either an absolute number or a percentage Mutually Exclusive with <code>minAvailable</code></td>
<td>``</td>
</tr>
<tr>
<td><code>agones.controller.http.port</code></td>
<td>Port to use for liveness probe service and metrics</td>
<td><code>8080</code></td>
</tr>
<tr>
<td><code>agones.controller.healthCheck.initialDelaySeconds</code></td>
<td>Initial delay before performing the first probe (in seconds)</td>
<td><code>3</code></td>
</tr>
<tr>
<td><code>agones.controller.healthCheck.periodSeconds</code></td>
<td>Seconds between every liveness probe (in seconds)</td>
<td><code>3</code></td>
</tr>
<tr>
<td><code>agones.controller.healthCheck.failureThreshold</code></td>
<td>Number of times before giving up (in seconds)</td>
<td><code>3</code></td>
</tr>
<tr>
<td><code>agones.controller.healthCheck.timeoutSeconds</code></td>
<td>Number of seconds after which the probe times out (in seconds)</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>agones.controller.resources</code></td>
<td>Controller <a href="https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/">resource requests/limit</a></td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.controller.generateTLS</code></td>
<td>Set to true to generate TLS certificates or false to provide your own certificates</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>agones.controller.tlsCert</code></td>
<td>Custom TLS certificate provided as a string</td>
<td>``</td>
</tr>
<tr>
<td><code>agones.controller.tlsKey</code></td>
<td>Custom TLS private key provided as a string</td>
<td>``</td>
</tr>
<tr>
<td><code>agones.controller.nodeSelector</code></td>
<td>Controller <a href="https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#nodeselector">node labels</a> for pod assignment</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.controller.tolerations</code></td>
<td>Controller <a href="https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/">toleration</a> labels for pod assignment</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>agones.controller.affinity</code></td>
<td>Controller <a href="https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity">affinity</a> settings for pod assignment</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.controller.annotations</code></td>
<td><a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/">Annotations</a> added to the Code Blind controller pods</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.controller.numWorkers</code></td>
<td>Number of workers to spin per resource type</td>
<td><code>100</code></td>
</tr>
<tr>
<td><code>agones.controller.apiServerQPS</code></td>
<td>Maximum sustained queries per second that controller should be making against API Server</td>
<td><code>400</code></td>
</tr>
<tr>
<td><code>agones.controller.apiServerQPSBurst</code></td>
<td>Maximum burst queries per second that controller should be making against API Server</td>
<td><code>500</code></td>
</tr>
<tr>
<td><code>agones.controller.logLevel</code></td>
<td>Code Blind Controller Log level. Log only entries with that severity and above</td>
<td><code>info</code></td>
</tr>
<tr>
<td><code>agones.controller.persistentLogs</code></td>
<td>Store Code Blind controller logs in a temporary volume attached to a container for debugging</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>agones.controller.persistentLogsSizeLimitMB</code></td>
<td>Maximum total size of all Code Blind container logs in MB</td>
<td><code>10000</code></td>
</tr>
<tr>
<td><code>agones.controller.disableSecret</code></td>
<td>Disables the creation of any allocator secrets. If true, you MUST provide the <code>{agones.releaseName}-cert</code> secrets before installation.</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>agones.controller.customCertSecretPath</code></td>
<td>Remap cert-manager path to server.crt and server.key</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.controller.allocationApiService.annotations</code></td>
<td><a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/">Annotations</a> added to the Code Blind apiregistration</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.controller.allocationApiService.disableCaBundle</code></td>
<td>Disable ca-bundle so it can be injected by cert-manager</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>agones.controller.validatingWebhook.annotations</code></td>
<td><a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/">Annotations</a> added to the Code Blind validating webhook</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.controller.validatingWebhook.disableCaBundle</code></td>
<td>Disable ca-bundle so it can be injected by cert-manager</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>agones.controller.mutatingWebhook.annotations</code></td>
<td><a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/">Annotations</a> added to the Code Blind mutating webhook</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.controller.mutatingWebhook.disableCaBundle</code></td>
<td>Disable ca-bundle so it can be injected by cert-manager</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>agones.controller.allocationBatchWaitTime</code></td>
<td>Wait time between each allocation batch when performing allocations in controller mode</td>
<td><code>500ms</code></td>
</tr>
<tr>
<td><code>agones.controller.topologySpreadConstraints</code></td>
<td>Ensures better resource utilization and high availability by evenly distributing Pods in the agones-system namespace</td>
<td><code>{}</code></td>
</tr>
</tbody>
</table>
<h3 id="ping-service">Ping Service</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>agones.ping.install</code></td>
<td>Whether to install the <a href="https://codeblind.ai/docs/guides/ping-service/">ping service</a></td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>agones.ping.replicas</code></td>
<td>The number of replicas to run in the deployment</td>
<td><code>2</code></td>
</tr>
<tr>
<td><code>agones.ping.http.expose</code></td>
<td>Expose the http ping service via a Service</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>agones.ping.http.response</code></td>
<td>The string response returned from the http service</td>
<td><code>ok</code></td>
</tr>
<tr>
<td><code>agones.ping.http.port</code></td>
<td>The port to expose on the service</td>
<td><code>80</code></td>
</tr>
<tr>
<td><code>agones.ping.http.serviceType</code></td>
<td>The <a href="https://kubernetes.io/docs/concepts/services-networking/service/">Service Type</a> of the HTTP Service</td>
<td><code>LoadBalancer</code></td>
</tr>
<tr>
<td><code>agones.ping.http.nodePort</code></td>
<td>Static node port to use for HTTP ping service. (Only applies when <code>agones.ping.http.serviceType</code> is <code>NodePort</code>.)</td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>agones.ping.http.loadBalancerIP</code></td>
<td>The <a href="https://kubernetes.io/docs/concepts/services-networking/service/#loadbalancer">Load Balancer IP</a> of the HTTP Service load balancer. Only works if the Kubernetes provider supports this option.</td>
<td>``</td>
</tr>
<tr>
<td><code>agones.ping.http.loadBalancerSourceRanges</code></td>
<td>The <a href="https://kubernetes.io/docs/concepts/services-networking/service/#loadbalancer">Load Balancer SourceRanges</a> of the HTTP Service load balancer. Only works if the Kubernetes provider supports this option.</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>agones.ping.http.annotations</code></td>
<td><a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/">Annotations</a> added to the Code Blind ping http service</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.ping.udp.expose</code></td>
<td>Expose the udp ping service via a Service</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>agones.ping.udp.rateLimit</code></td>
<td>Number of UDP packets the ping service handles per instance, per second, per sender</td>
<td><code>20</code></td>
</tr>
<tr>
<td><code>agones.ping.udp.port</code></td>
<td>The port to expose on the service</td>
<td><code>80</code></td>
</tr>
<tr>
<td><code>agones.ping.udp.serviceType</code></td>
<td>The <a href="https://kubernetes.io/docs/concepts/services-networking/service/">Service Type</a> of the UDP Service</td>
<td><code>LoadBalancer</code></td>
</tr>
<tr>
<td><code>agones.ping.udp.nodePort</code></td>
<td>Static node port to use for UDP ping service. (Only applies when <code>agones.ping.udp.serviceType</code> is <code>NodePort</code>.)</td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>agones.ping.udp.loadBalancerIP</code></td>
<td>The <a href="https://kubernetes.io/docs/concepts/services-networking/service/#loadbalancer">Load Balancer IP</a> of the UDP Service load balancer. Only works if the Kubernetes provider supports this option.</td>
<td>``</td>
</tr>
<tr>
<td><code>agones.ping.udp.loadBalancerSourceRanges</code></td>
<td>The <a href="https://kubernetes.io/docs/concepts/services-networking/service/#loadbalancer">Load Balancer SourceRanges</a> of the UDP Service load balancer. Only works if the Kubernetes provider supports this option.</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>agones.ping.udp.annotations</code></td>
<td><a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/">Annotations</a> added to the Code Blind ping udp service</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.ping.healthCheck.initialDelaySeconds</code></td>
<td>Initial delay before performing the first probe (in seconds)</td>
<td><code>3</code></td>
</tr>
<tr>
<td><code>agones.ping.healthCheck.periodSeconds</code></td>
<td>Seconds between every liveness probe (in seconds)</td>
<td><code>3</code></td>
</tr>
<tr>
<td><code>agones.ping.healthCheck.failureThreshold</code></td>
<td>Number of times before giving up (in seconds)</td>
<td><code>3</code></td>
</tr>
<tr>
<td><code>agones.ping.healthCheck.timeoutSeconds</code></td>
<td>Number of seconds after which the probe times out (in seconds)</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>agones.ping.resources</code></td>
<td>Ping pods <a href="https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/">resource requests/limit</a></td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.ping.nodeSelector</code></td>
<td>Ping <a href="https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#nodeselector">node labels</a> for pod assignment</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.ping.tolerations</code></td>
<td>Ping <a href="https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/">toleration</a> labels for pod assignment</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>agones.ping.affinity</code></td>
<td>Ping <a href="https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity">affinity</a> settings for pod assignment</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.ping.annotations</code></td>
<td><a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/">Annotations</a> added to the Code Blind ping pods</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.ping.updateStrategy</code></td>
<td>The <a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#strategy">strategy</a> to apply to the allocator deployment</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.ping.pdb.enabled</code></td>
<td>Set to <code>true</code> to enable the creation of a <a href="https://kubernetes.io/docs/tasks/run-application/configure-pdb/">PodDisruptionBudget</a> for the ping deployment</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>agones.ping.pdb.minAvailable</code></td>
<td>Description of the number of pods from that set that must still be available after the eviction, even in the absence of the evicted pod. Can be either an absolute number or a percentage. Mutually Exclusive with <code>maxUnavailable</code></td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>agones.ping.pdb.maxUnavailable</code></td>
<td>Description of the number of pods from that set that can be unavailable after the eviction. It can be either an absolute number or a percentage Mutually Exclusive with <code>minAvailable</code></td>
<td>``</td>
</tr>
<tr>
<td><code>agones.ping.topologySpreadConstraints</code></td>
<td>Ensures better resource utilization and high availability by evenly distributing Pods in the agones-system namespace</td>
<td><code>{}</code></td>
</tr>
</tbody>
</table>
<h3 id="allocator-service">Allocator Service</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>agones.allocator.apiServerQPS</code></td>
<td>Maximum sustained queries per second that an allocator should be making against API Server</td>
<td><code>400</code></td>
</tr>
<tr>
<td><code>agones.allocator.apiServerQPSBurst</code></td>
<td>Maximum burst queries per second that an allocator should be making against API Server</td>
<td><code>500</code></td>
</tr>
<tr>
<td><code>agones.allocator.remoteAllocationTimeout</code></td>
<td>Remote allocation call timeout.</td>
<td><code>10s</code></td>
</tr>
<tr>
<td><code>agones.allocator.totalRemoteAllocationTimeout</code></td>
<td>Total remote allocation timeout including retries.</td>
<td><code>30s</code></td>
</tr>
<tr>
<td><code>agones.allocator.logLevel</code></td>
<td>Code Blind Allocator Log level. Log only entries with that severity and above</td>
<td><code>info</code></td>
</tr>
<tr>
<td><code>agones.allocator.install</code></td>
<td>Whether to install the <a href="https://codeblind.ai/docs/advanced/allocator-service/">allocator service</a></td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>agones.allocator.replicas</code></td>
<td>The number of replicas to run in the deployment</td>
<td><code>3</code></td>
</tr>
<tr>
<td><code>agones.allocator.service.name</code></td>
<td>Service name for the allocator</td>
<td><code>agones-allocator</code></td>
</tr>
<tr>
<td><code>agones.allocator.service.serviceType</code></td>
<td>The <a href="https://kubernetes.io/docs/concepts/services-networking/service/">Service Type</a> of the HTTP Service</td>
<td><code>LoadBalancer</code></td>
</tr>
<tr>
<td><code>agones.allocator.service.clusterIP</code></td>
<td>The <a href="https://kubernetes.io/docs/concepts/services-networking/service/#type-clusterip">Cluster IP</a> of the Code Blind allocator. If you want <a href="https://kubernetes.io/docs/concepts/services-networking/service/#headless-services">Headless Service</a> for Code Blind Allocator, you can set <code>None</code> to clusterIP.</td>
<td>``</td>
</tr>
<tr>
<td><code>agones.allocator.service.loadBalancerIP</code></td>
<td>The <a href="https://kubernetes.io/docs/concepts/services-networking/service/#loadbalancer">Load Balancer IP</a> of the Code Blind allocator load balancer. Only works if the Kubernetes provider supports this option.</td>
<td>``</td>
</tr>
<tr>
<td><code>agones.allocator.service.loadBalancerSourceRanges</code></td>
<td>The <a href="https://kubernetes.io/docs/concepts/services-networking/service/#loadbalancer">Load Balancer SourceRanges</a> of the Code Blind allocator load balancer. Only works if the Kubernetes provider supports this option.</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>agones.allocator.service.annotations</code></td>
<td><a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/">Annotations</a> added to the Code Blind allocator service</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.allocator.service.http.enabled</code></td>
<td>If true the <a href="https://codeblind.ai/docs/advanced/allocator-service/">allocator service</a> will respond to <a href="https://codeblind.ai/docs/advanced/allocator-service/#using-rest">REST requests</a></td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>agones.allocator.service.http.appProtocol</code></td>
<td>The <code>appProtocol</code> to set on the Service for the http allocation port. If left blank, no value is set.</td>
<td>``</td>
</tr>
<tr>
<td><code>agones.allocator.service.http.port</code></td>
<td>The port that is exposed externally by the <a href="https://codeblind.ai/docs/advanced/allocator-service/">allocator service</a> for <a href="https://codeblind.ai/docs/advanced/allocator-service/#using-rest">REST requests</a></td>
<td><code>443</code></td>
</tr>
<tr>
<td><code>agones.allocator.service.http.portName</code></td>
<td>The name of exposed port</td>
<td><code>http</code></td>
</tr>
<tr>
<td><code>agones.allocator.service.http.targetPort</code></td>
<td>The port that is used by the allocator pod to listen for <a href="https://codeblind.ai/docs/advanced/allocator-service/#using-rest">REST requests</a>. Note that the allocator server cannot bind to low numbered ports.</td>
<td><code>8443</code></td>
</tr>
<tr>
<td><code>agones.allocator.service.http.nodePort</code></td>
<td>If the ServiceType is set to &ldquo;NodePort&rdquo;,  this is the NodePort that the allocator http service is exposed on.</td>
<td><code>30000-32767</code></td>
</tr>
<tr>
<td><code>agones.allocator.service.grpc.enabled</code></td>
<td>If true the <a href="https://codeblind.ai/docs/advanced/allocator-service/">allocator service</a> will respond to <a href="https://codeblind.ai/docs/advanced/allocator-service/#using-grpc">gRPC requests</a></td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>agones.allocator.service.grpc.port</code></td>
<td>The port that is exposed externally by the <a href="https://codeblind.ai/docs/advanced/allocator-service/">allocator service</a> for <a href="https://codeblind.ai/docs/advanced/allocator-service/#using-grpc">gRPC requests</a></td>
<td><code>443</code></td>
</tr>
<tr>
<td><code>agones.allocator.service.grpc.portName</code></td>
<td>The name of exposed port</td>
<td>``</td>
</tr>
<tr>
<td><code>agones.allocator.service.grpc.appProtocol</code></td>
<td>The <code>appProtocol</code> to set on the Service for the gRPC allocation port. If left blank, no value is set.</td>
<td>``</td>
</tr>
<tr>
<td><code>agones.allocator.service.grpc.nodePort</code></td>
<td>If the ServiceType is set to &ldquo;NodePort&rdquo;,  this is the NodePort that the allocator gRPC service is exposed on.</td>
<td><code>30000-32767</code></td>
</tr>
<tr>
<td><code>agones.allocator.service.grpc.targetPort</code></td>
<td>The port that is used by the allocator pod to listen for <a href="https://codeblind.ai/docs/advanced/allocator-service/#using-grpc">gRPC requests</a>. Note that the allocator server cannot bind to low numbered ports.</td>
<td><code>8443</code></td>
</tr>
<tr>
<td><code>agones.allocator.generateClientTLS</code></td>
<td>Set to true to generate client TLS certificates or false to provide certificates in <code>certs/allocator/allocator-client.default/*</code></td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>agones.allocator.generateTLS</code></td>
<td>Set to true to generate TLS certificates or false to provide your own certificates</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>agones.allocator.disableMTLS</code></td>
<td>Turns off client cert authentication for incoming connections to the allocator.</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>agones.allocator.disableTLS</code></td>
<td>Turns off TLS security for incoming connections to the allocator.</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>agones.allocator.disableSecretCreation</code></td>
<td>Disables the creation of any allocator secrets. If true, you MUST provide the <code>allocator-tls</code>, <code>allocator-tls-ca</code>, and <code>allocator-client-ca</code> secrets before installation.</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>agones.allocator.tlsCert</code></td>
<td>Custom TLS certificate provided as a string</td>
<td>``</td>
</tr>
<tr>
<td><code>agones.allocator.tlsKey</code></td>
<td>Custom TLS private key provided as a string</td>
<td>``</td>
</tr>
<tr>
<td><code>agones.allocator.clientCAs</code></td>
<td>A map of secret key names to allowed client CA certificates provided as strings</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.allocator.tolerations</code></td>
<td>Allocator <a href="https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/">toleration</a> labels for pod assignment</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>agones.allocator.affinity</code></td>
<td>Allocator <a href="https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity">affinity</a> settings for pod assignment</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.allocator.annotations</code></td>
<td><a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/">Annotations</a> added to the Code Blind allocator pods</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.allocator.resources</code></td>
<td>Allocator pods <a href="https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/">resource requests/limit</a></td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.allocator.labels</code></td>
<td><a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/">Labels</a> Added to the Code Blind Allocator pods</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.allocator.readiness.initialDelaySeconds</code></td>
<td>Initial delay before performing the first probe (in seconds)</td>
<td><code>3</code></td>
</tr>
<tr>
<td><code>agones.allocator.readiness.periodSeconds</code></td>
<td>Seconds between every liveness probe (in seconds)</td>
<td><code>3</code></td>
</tr>
<tr>
<td><code>agones.allocator.readiness.failureThreshold</code></td>
<td>Number of times before giving up (in seconds)</td>
<td><code>3</code></td>
</tr>
<tr>
<td><code>agones.allocator.nodeSelector</code></td>
<td>Allocator <a href="https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#nodeselector">node labels</a> for pod assignment</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.allocator.serviceMetrics.name</code></td>
<td>Second Service name for the allocator</td>
<td><code>agones-allocator-metrics-service</code></td>
</tr>
<tr>
<td><code>agones.allocator.serviceMetrics.annotations</code></td>
<td><a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/">Annotations</a> added to the Code Blind allocator second Service</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.allocator.serviceMetrics.http.port</code></td>
<td>The port that is exposed within cluster by the <a href="https://codeblind.ai/docs/advanced/allocator-service/">allocator service</a> for http requests</td>
<td><code>8080</code></td>
</tr>
<tr>
<td><code>agones.allocator.serviceMetrics.http.portName</code></td>
<td>The name of exposed port</td>
<td><code>http</code></td>
</tr>
<tr>
<td><code>agones.allocator.allocationBatchWaitTime</code></td>
<td>Wait time between each allocation batch when performing allocations in allocator mode</td>
<td><code>500ms</code></td>
</tr>
<tr>
<td><code>agones.allocator.updateStrategy</code></td>
<td>The <a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#strategy">strategy</a> to apply to the ping deployment</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.allocator.pdb.enabled</code></td>
<td>Set to <code>true</code> to enable the creation of a <a href="https://kubernetes.io/docs/tasks/run-application/configure-pdb/">PodDisruptionBudget</a> for the allocator deployment</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>agones.allocator.pdb.minAvailable</code></td>
<td>Description of the number of pods from that set that must still be available after the eviction, even in the absence of the evicted pod. Can be either an absolute number or a percentage. Mutually Exclusive with <code>maxUnavailable</code></td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>agones.allocator.pdb.maxUnavailable</code></td>
<td>Description of the number of pods from that set that can be unavailable after the eviction. It can be either an absolute number or a percentage. Mutually Exclusive with <code>minAvailable</code></td>
<td>``</td>
</tr>
<tr>
<td><code>agones.allocator.topologySpreadConstraints</code></td>
<td>Ensures better resource utilization and high availability by evenly distributing Pods in the agones-system namespace</td>
<td><code>{}</code></td>
</tr>
</tbody>
</table>
<h3 id="extensions">Extensions</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>agones.extensions.http.port</code></td>
<td>Port to use for liveness probe service and metrics</td>
<td><code>8080</code></td>
</tr>
<tr>
<td><code>agones.extensions.healthCheck.initialDelaySeconds</code></td>
<td>Initial delay before performing the first probe (in seconds)</td>
<td><code>3</code></td>
</tr>
<tr>
<td><code>agones.extensions.healthCheck.periodSeconds</code></td>
<td>Seconds between every liveness probe (in seconds)</td>
<td><code>3</code></td>
</tr>
<tr>
<td><code>agones.extensions.healthCheck.failureThreshold</code></td>
<td>Number of times before giving up (in seconds)</td>
<td><code>3</code></td>
</tr>
<tr>
<td><code>agones.extensions.healthCheck.timeoutSeconds</code></td>
<td>Number of seconds after which the probe times out (in seconds)</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>agones.extensions.resources</code></td>
<td>Extensions <a href="https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/">resource requests/limit</a></td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.extensions.generateTLS</code></td>
<td>Set to true to generate TLS certificates or false to provide your own certificates</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>agones.extensions.tlsCert</code></td>
<td>Custom TLS certificate provided as a string</td>
<td>``</td>
</tr>
<tr>
<td><code>agones.extensions.tlsKey</code></td>
<td>Custom TLS private key provided as a string</td>
<td>``</td>
</tr>
<tr>
<td><code>agones.extensions.nodeSelector</code></td>
<td>Extensions <a href="https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#nodeselector">node labels</a> for pod assignment</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.extensions.tolerations</code></td>
<td>Extensions <a href="https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/">toleration</a> labels for pod assignment</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>agones.extensions.affinity</code></td>
<td>Extensions <a href="https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity">affinity</a> settings for pod assignment</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.extensions.annotations</code></td>
<td><a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/">Annotations</a> added to the Code Blind extensions pods</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.extensions.numWorkers</code></td>
<td>Number of workers to spin per resource type</td>
<td><code>100</code></td>
</tr>
<tr>
<td><code>agones.extensions.apiServerQPS</code></td>
<td>Maximum sustained queries per second that extensions should be making against API Server</td>
<td><code>400</code></td>
</tr>
<tr>
<td><code>agones.extensions.apiServerQPSBurst</code></td>
<td>Maximum burst queries per second that extensions should be making against API Server</td>
<td><code>500</code></td>
</tr>
<tr>
<td><code>agones.extensions.logLevel</code></td>
<td>Code Blind Extensions Log level. Log only entries with that severity and above</td>
<td><code>info</code></td>
</tr>
<tr>
<td><code>agones.extensions.persistentLogs</code></td>
<td>Store Code Blind extensions logs in a temporary volume attached to a container for debugging</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>agones.extensions.persistentLogsSizeLimitMB</code></td>
<td>Maximum total size of all Code Blind container logs in MB</td>
<td><code>10000</code></td>
</tr>
<tr>
<td><code>agones.extensions.disableSecret</code></td>
<td>Disables the creation of any allocator secrets. If true, you MUST provide the <code>{agones.releaseName}-cert</code> secrets before installation.</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>agones.extensions.customCertSecretPath</code></td>
<td>Remap cert-manager path to server.crt and server.key</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.extensions.allocationApiService.annotations</code></td>
<td><a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/">Annotations</a> added to the Code Blind apiregistration</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.extensions.allocationApiService.disableCaBundle</code></td>
<td>Disable ca-bundle so it can be injected by cert-manager</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>agones.extensions.validatingWebhook.annotations</code></td>
<td><a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/">Annotations</a> added to the Code Blind validating webhook</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.extensions.validatingWebhook.disableCaBundle</code></td>
<td>Disable ca-bundle so it can be injected by cert-manager</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>agones.extensions.mutatingWebhook.annotations</code></td>
<td><a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/">Annotations</a> added to the Code Blind mutating webhook</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>agones.extensions.mutatingWebhook.disableCaBundle</code></td>
<td>Disable ca-bundle so it can be injected by cert-manager</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>agones.extensions.allocationBatchWaitTime</code></td>
<td>Wait time between each allocation batch when performing allocations in controller mode</td>
<td><code>500ms</code></td>
</tr>
<tr>
<td><code>agones.extensions.pdb.minAvailable</code></td>
<td>Description of the number of pods from that set that must still be available after the eviction, even in the absence of the evicted pod. Can be either an absolute number or a percentage. Mutually Exclusive with maxUnavailable</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>agones.extensions.pdb.maxUnavailable</code></td>
<td>Description of the number of pods from that set that can be unavailable after the eviction. It can be either an absolute number or a percentage Mutually Exclusive with <code>minAvailable</code></td>
<td>``</td>
</tr>
<tr>
<td><code>agones.extensions.replicas</code></td>
<td>The number of replicas to run in the deployment</td>
<td><code>2</code></td>
</tr>
<tr>
<td><code>agones.extensions.topologySpreadConstraints</code></td>
<td>Ensures better resource utilization and high availability by evenly distributing Pods in the agones-system namespace</td>
<td><code>{}</code></td>
</tr>
</tbody>
</table>
<h3 id="gameservers">GameServers</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>gameservers.namespaces</code></td>
<td>a list of namespaces you are planning to use to deploy game servers</td>
<td><code>[&quot;default&quot;]</code></td>
</tr>
<tr>
<td><code>gameservers.minPort</code></td>
<td>Minimum port to use for dynamic port allocation</td>
<td><code>7000</code></td>
</tr>
<tr>
<td><code>gameservers.maxPort</code></td>
<td>Maximum port to use for dynamic port allocation</td>
<td><code>8000</code></td>
</tr>
<tr>
<td><code>gameservers.podPreserveUnknownFields</code></td>
<td>Disable <a href="https://kubernetes.io/docs/tasks/extend-kubernetes/custom-resources/custom-resource-definitions/#field-pruning">field pruning</a> and schema validation on the Pod template for a <a href="https://codeblind.ai/docs/reference/gameserver/">GameServer</a> definition</td>
<td><code>false</code></td>
</tr>
</tbody>
</table>
<h3 id="helm-installation">Helm Installation</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>helm.installTests</code></td>
<td>Add an ability to run <code>helm test agones</code> to verify the installation</td>
<td><code>false</code></td>
</tr>
</tbody>
</table>
<p>Specify each parameter using the <code>--set key=value[,key=value]</code> argument to <code>helm install</code>. For example,</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>helm install my-release --namespace agones-system <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --set gameservers.minPort<span style="color:#ce5c00;font-weight:bold">=</span>1000,gameservers.maxPort<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">5000</span> agones
</span></span></code></pre></div><p>The above command will deploy Code Blind controllers to <code>agones-system</code> namespace. Additionally Code Blind will use a dynamic GameServers&rsquo; port allocation range of 1000-5000.</p>
<p>Alternatively, a YAML file that specifies the values for the parameters can be provided while installing the chart. For example,</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>helm install my-release --namespace agones-system -f values.yaml agones/agones
</span></span></code></pre></div>

<div class="alert alert-info" role="alert">
<h4 class="alert-heading">Tip</h4>

    You can use the default
<a href="https://github.com/josephbarnett/codeblind.ai/blob/release-1.38.0/" target="_blank" data-proofer-ignore>values.yaml</a>

</div>

<h2 id="helm-test">Helm test</h2>
<p>This test would create a <code>GameServer</code> resource and delete it afterwards.</p>


<div class="alert alert-info" role="alert">
<h4 class="alert-heading">Tip</h4>

    In order to use <code>helm test</code> command described in this section you need to set <code>helm.installTests</code> helm parameter to <code>true</code>.

</div>

<p>Check the Code Blind installation by running the following command:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>helm <span style="color:#204a87">test</span> my-release -n agones-system
</span></span></code></pre></div><p>You should see a successful output similar to this :</p>
<pre tabindex="0"><code>NAME: my-release
LAST DEPLOYED: Wed Mar 29 06:13:23 2023
NAMESPACE: agones-system
STATUS: deployed
REVISION: 4
TEST SUITE:     my-release-test
Last Started:   Wed Mar 29 06:17:52 2023
Last Completed: Wed Mar 29 06:18:10 2023
Phase:          Succeeded
</code></pre><h2 id="controller-tls-certificates">Controller TLS Certificates</h2>
<p>By default agones chart generates tls certificates used by the admission controller, while this is handy, it requires the agones controller to restart on each <code>helm upgrade</code> command.</p>
<h3 id="manual">Manual</h3>
<p>For most use cases the controller would have required a restart anyway (eg: controller image updated). However if you really need to avoid restarts we suggest that you turn off tls automatic generation (<code>agones.controller.generateTLS</code> to <code>false</code>) and provide your own certificates (<code>certs/server.crt</code>,<code>certs/server.key</code>).</p>


<div class="alert alert-info" role="alert">
<h4 class="alert-heading">Tip</h4>

    You can use our script located at
<a href="https://github.com/josephbarnett/codeblind.ai/blob/release-1.38.0/" target="_blank" data-proofer-ignore>cert.sh</a> to generate them.

</div>

<h3 id="cert-manager">Cert-Manager</h3>
<p>Another approach is to use <a href="https://cert-manager.io/">cert-manager.io</a> solution for cluster level certificate management.</p>
<p>In order to use the cert-manager solution, first <a href="https://cert-manager.io/docs/installation/kubernetes/">install cert-manager</a> on the cluster.
Then, <a href="https://cert-manager.io/docs/configuration/">configure</a> an <code>Issuer</code>/<code>ClusterIssuer</code> resource and
last <a href="https://cert-manager.io/docs/usage/certificate/">configure</a> a <code>Certificate</code> resource to manage controller <code>Secret</code>.
Make sure to configure the <code>Certificate</code> based on your system&rsquo;s requirements, including the validity <code>duration</code>.</p>
<p>Here is an example of using a self-signed <code>ClusterIssuer</code> for configuring controller <code>Secret</code> where secret name is <code>my-release-cert</code> or <code>{{ template &quot;agones.fullname&quot; . }}-cert</code>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#8f5902;font-style:italic"># Create a self-signed ClusterIssuer</span>
</span></span><span style="display:flex;"><span>cat <span style="color:#4e9a06">&lt;&lt;EOF | kubectl apply -f -
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">apiVersion: cert-manager.io/v1
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">kind: ClusterIssuer
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">  name: selfsigned
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">  selfSigned: {}
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Create a Certificate with IP for the my-release-cert )</span>
</span></span><span style="display:flex;"><span>cat <span style="color:#4e9a06">&lt;&lt;EOF | kubectl apply -f -
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">apiVersion: cert-manager.io/v1
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">kind: Certificate
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">  name: my-release-agones-cert
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">  namespace: agones-system
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">  dnsNames:
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">    - agones-controller-service.agones-system.svc
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">  secretName: my-release-agones-cert
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">  issuerRef:
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">    name: selfsigned
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">    kind: ClusterIssuer
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">EOF</span>
</span></span></code></pre></div><p>After the certificates are generated, we will want to <a href="https://cert-manager.io/docs/concepts/ca-injector/">inject caBundle</a> into the controller and extensions webhook and disable the controller and extensions secret creation through the following values.yaml file.:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">agones</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">controller</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">disableSecret</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">customCertSecretPath</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:bold">key</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ca.crt</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ca.crt</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:bold">key</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls.crt</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">server.crt</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:bold">key</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls.key</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">server.key</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">allocationApiService</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">annotations</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">cert-manager.io/inject-ca-from</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">agones-system/my-release-agones-cert</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">disableCaBundle</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">validatingWebhook</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">annotations</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">cert-manager.io/inject-ca-from</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">agones-system/my-release-agones-cert</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">disableCaBundle</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">mutatingWebhook</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">annotations</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">cert-manager.io/inject-ca-from</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">agones-system/my-release-agones-cert</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">disableCaBundle</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">extensions</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">disableSecret</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">customCertSecretPath</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:bold">key</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ca.crt</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ca.crt</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:bold">key</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls.crt</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">server.crt</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:bold">key</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">tls.key</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">server.key</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">allocationApiService</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">annotations</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">cert-manager.io/inject-ca-from</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">agones-system/my-release-agones-cert</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">disableCaBundle</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">validatingWebhook</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">annotations</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">cert-manager.io/inject-ca-from</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">agones-system/my-release-agones-cert</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">disableCaBundle</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">mutatingWebhook</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">annotations</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">cert-manager.io/inject-ca-from</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">agones-system/my-release-agones-cert</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">disableCaBundle</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>After copying the above yaml into a <code>values.yaml</code> file, use below command to install Code Blind:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>helm install my-release --namespace agones-system --create-namespace --values values.yaml agones/agones
</span></span></code></pre></div><h2 id="reserved-allocator-load-balancer-ip">Reserved Allocator Load Balancer IP</h2>
<p>In order to reuse the existing load balancer IP on upgrade or install the <code>agones-allocator</code> service as a <code>LoadBalancer</code> using a reserved static IP, a user can specify the load balancer&rsquo;s IP with the <code>agones.allocator.http.loadBalancerIP</code> helm configuration parameter value. By setting the <code>loadBalancerIP</code> value:</p>
<ol>
<li>The <code>LoadBalancer</code> is created with the specified IP, if supported by the cloud provider.</li>
<li>A self-signed server TLS certificate is generated for the IP, used by the <code>agones-allocator</code> service.</li>
</ol>
<h2 id="next-steps">Next Steps</h2>
<ul>
<li><a href="/docs/installation/confirm/">Confirm Code Blind is up and running</a></li>
</ul>

</div>



    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-1ce1902627986754e63902ced859a973">3 - Deploy Kubernetes cluster and install Code Blind using Terraform</h1>
    <div class="lead">Install a <a href="http://kubernetes.io">Kubernetes</a> cluster and Code Blind declaratively using Terraform.</div>
	<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li><a href="https://www.terraform.io/">Terraform</a> v1.0.8</li>
<li>Access to the the Kubernetes hosting provider you are using (e.g. <code>gcloud</code>,
<code>awscli</code>, or <code>az</code> utility installed)</li>
<li>Git</li>
</ul>


<div class="alert alert-info" role="alert">
<h4 class="alert-heading">Note</h4>

    <p>All our Terraform modules and examples use a
<a href="https://github.com/josephbarnett/codeblind.ai/blob/release-1.38.0/" target="_blank" data-proofer-ignore>Helm 3 Module</a>.</p>
<p>The last Code Blind release to include a Helm 2 module was <a href="https://agones.dev/blog/2020/09/29/1.9.0-kubernetes-1.16-nuget-and-tcp-udp/">1.9.0</a>.</p>


</div>


</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-4ebc8d21cb3a0bed08fa6069e0de7ccb">3.1 - Installing Code Blind on Google Kubernetes Engine using Terraform</h1>
    <div class="lead">You can use Terraform to provision a GKE cluster and install Code Blind on it.</div>
	<h2 id="before-you-begin">Before you begin</h2>
<p>Take the following steps to enable the Kubernetes Engine API:</p>
<ol>
<li>Visit the <a href="https://console.cloud.google.com/kubernetes/list">Kubernetes Engine</a> page in the Google Cloud Platform Console.</li>
<li>Create or select a project.</li>
<li>Wait for the API and related services to be enabled. This can take several minutes.</li>
<li><a href="https://support.google.com/cloud/answer/6293499#enable-billing">Enable billing</a> for your project.</li>
</ol>
<ul>
<li>If you are not an existing GCP user, you may be able to enroll for a $300 US <a href="https://cloud.google.com/free/">Free Trial</a> credit.</li>
</ul>
<h3 id="choosing-a-shell">Choosing a shell</h3>
<p>To complete this quickstart, we can use either <a href="https://cloud.google.com/shell/">Google Cloud Shell</a> or a local shell.</p>
<p>Google Cloud Shell is a shell environment for managing resources hosted on Google Cloud Platform (GCP). Cloud Shell comes preinstalled with the <a href="https://cloud.google.com/sdk/gcloud/">gcloud</a> and <a href="https://kubernetes.io/docs/reference/kubectl/">kubectl</a> command-line tools. <code>gcloud</code> provides the primary command-line interface for GCP, and <code>kubectl</code> provides the command-line interface for running commands against Kubernetes clusters.</p>
<p>If you prefer using your local shell, you must install the gcloud and kubectl command-line tools in your environment.</p>
<h4 id="cloud-shell">Cloud shell</h4>
<p>To launch Cloud Shell, perform the following steps:</p>
<ol>
<li>Go to <a href="https://console.cloud.google.com/home/dashboard">Google Cloud Platform Console</a></li>
<li>From the top-right corner of the console, click the
<strong>Activate Google Cloud Shell</strong> button: <img alt="cloud shell" src="../../../../images/cloud-shell.png"></li>
<li>A Cloud Shell session opens inside a frame at the bottom of the console. Use this shell to run <code>gcloud</code> and <code>kubectl</code> commands.</li>
<li>Set a compute zone in your geographical region with the following command. The compute zone will be something like <code>us-west1-a</code>. A full list can be found <a href="https://cloud.google.com/compute/docs/regions-zones/#available">here</a>.
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gcloud config <span style="color:#204a87">set</span> compute/zone <span style="color:#ce5c00;font-weight:bold">[</span>COMPUTE_ZONE<span style="color:#ce5c00;font-weight:bold">]</span>
</span></span></code></pre></div></li>
</ol>
<h4 id="local-shell">Local shell</h4>
<p>To install <code>gcloud</code> and <code>kubectl</code>, perform the following steps:</p>
<ol>
<li><a href="https://cloud.google.com/sdk/docs/quickstarts">Install the Google Cloud SDK</a>, which includes the <code>gcloud</code> command-line tool.</li>
<li>Initialize some default configuration by running the following command.
<ul>
<li>When asked <code>Do you want to configure a default Compute Region and Zone? (Y/n)?</code>, enter <code>Y</code> and choose a zone in your geographical region of choice.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gcloud init
</span></span></code></pre></div></li>
<li>Install the <code>kubectl</code> command-line tool by running the following command:
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gcloud components install kubectl
</span></span></code></pre></div></li>
</ol>
<h2 id="installation">Installation</h2>
<p>An example configuration can be found here:

<a href="https://github.com/josephbarnett/codeblind.ai/blob/release-1.38.0/" target="_blank" data-proofer-ignore>Terraform configuration with Code Blind submodule</a>.</p>
<p>Copy this file into a local directory where you will execute the terraform commands.</p>
<p>The GKE cluster created from the example configuration will contain 3 Node Pools:</p>
<ul>
<li><code>&quot;default&quot;</code> node pool with <code>&quot;game-server&quot;</code> tag, containing 4 nodes.</li>
<li><code>&quot;agones-system&quot;</code> node pool for Code Blind Controller.</li>
<li><code>&quot;agones-metrics&quot;</code> for monitoring and metrics collecting purpose.</li>
</ul>
<p>Configurable parameters:</p>
<ul>
<li>project - your Google Cloud Project ID (required)</li>
<li>name - the name of the GKE cluster (default is &ldquo;agones-terraform-example&rdquo;)</li>
<li>agones_version - the version of agones to install (an empty string, which is the default, is the latest version from the <a href="https://agones.dev/chart/stable">Helm repository</a>)</li>
<li>machine_type - machine type for hosting game servers (default is &ldquo;e2-standard-4&rdquo;)</li>
<li>node_count - count of game server nodes for the default node pool (default is &ldquo;4&rdquo;)</li>
<li>enable_image_streaming - whether or not to enable image streaming for the <code>&quot;default&quot;</code> node pool (default is true)</li>
<li>zone - (Deprecated, use location) the name of the <a href="https://cloud.google.com/compute/docs/regions-zones">zone</a> you want your cluster to be
created in (default is &ldquo;us-west1-c&rdquo;)</li>
<li>network - the name of the VPC network you want your cluster and firewall rules to be connected to (default is &ldquo;default&rdquo;)</li>
<li>subnetwork - the name of the subnetwork in which the cluster&rsquo;s instances are launched. (required when using non default network)</li>
<li>log_level - possible values: Fatal, Error, Warn, Info, Debug (default is &ldquo;info&rdquo;)</li>
<li>feature_gates - a list of alpha and beta version features to enable. For example, &ldquo;PlayerTracking=true&amp;ContainerPortAllocation=true&rdquo;</li>
<li>gameserver_minPort - the lower bound of the port range which gameservers will listen on (default is &ldquo;7000&rdquo;)</li>
<li>gameserver_maxPort - the upper bound of the port range which gameservers will listen on (default is &ldquo;8000&rdquo;)</li>
<li>gameserver_namespaces - a list of namespaces which will be used to run gameservers (default is <code>[&quot;default&quot;]</code>). For example <code>[&quot;default&quot;, &quot;xbox-gameservers&quot;, &quot;mobile-gameservers&quot;]</code></li>
<li>force_update - whether or not to force the replacement/update of resource (default is true, false may be required to prevent immutability errors when updating the configuration)</li>
<li>location - the name of the <a href="https://cloud.google.com/compute/docs/regions-zones">location</a> you want your cluster  to be created in (default is &ldquo;us-west1-c&rdquo;)</li>
<li>autoscale - whether you want to enable autoscale for the gameserver nodepool (default is false)</li>
<li>min_node_count - the minimum number of nodes for a nodepool when autoscale is enabled (default is &ldquo;1&rdquo;)</li>
<li>max_node_count - the maximum number of nodes for a nodepool when autoscale is enabled (default is &ldquo;5&rdquo;)</li>
</ul>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Warning</h4>

    <p>On the lines that read <code>source = &quot;git::https://github.com/googleforgames/agones.git//install/terraform/modules/gke/?ref=main&quot;</code>
make sure to change <code>?ref=main</code> to match your targeted Code Blind release, as Terraform modules can change between
releases.</p>
<p>For example, if you are targeting release-1.38.0, then you will want to have
<code>source = &quot;git::https://github.com/googleforgames/agones.git//install/terraform/modules/gke/?ref=release-1.38.0&quot;</code>
as your source.</p>


</div>

<h3 id="creating-the-cluster">Creating the cluster</h3>
<p>In the directory where you created <code>module.tf</code>, run:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>terraform init
</span></span></code></pre></div><p>This will cause terraform to clone the Code Blind repository and use the <code>./install/terraform</code> folder as the starting point of
the Code Blind submodule, which contains all necessary Terraform configuration files.</p>
<p>Next, make sure that you can authenticate using gcloud:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gcloud auth application-default login
</span></span></code></pre></div><h4 id="option-1-creating-the-cluster-in-the-default-vpc">Option 1: Creating the cluster in the default VPC</h4>
<p>To create your GKE cluster in the default VPC just specify the project variable.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>terraform apply -var <span style="color:#000">project</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;&lt;YOUR_GCP_ProjectID&gt;&#34;</span>
</span></span></code></pre></div><h4 id="option-2-creating-the-cluster-in-a-custom-vpc">Option 2: Creating the cluster in a custom VPC</h4>
<p>To create the cluster in a custom VPC you must specify the project, network and subnetwork variables.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>terraform apply -var <span style="color:#000">project</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;&lt;YOUR_GCP_ProjectID&gt;&#34;</span> -var <span style="color:#000">network</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;&lt;YOUR_NETWORK_NAME&gt;&#34;</span> -var <span style="color:#000">subnetwork</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;&lt;YOUR_SUBNETWORK_NAME&gt;&#34;</span>
</span></span></code></pre></div><p>To verify that the cluster was created successfully, set up your kubectl credentials:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gcloud container clusters get-credentials --zone us-west1-c agones-terraform-example
</span></span></code></pre></div><p>Then check that you have access to the Kubernetes cluster:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl get nodes
</span></span></code></pre></div><p>You should have 6 nodes in <code>Ready</code> state.</p>
<h3 id="uninstall-the-code-blind-and-delete-gke-cluster">Uninstall the Code Blind and delete GKE cluster</h3>
<p>To delete all resources provisioned by Terraform:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>terraform destroy -var <span style="color:#000">project</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;&lt;YOUR_GCP_ProjectID&gt;&#34;</span>
</span></span></code></pre></div><h2 id="next-steps">Next Steps</h2>
<ul>
<li><a href="/docs/installation/confirm/">Confirm Code Blind is up and running</a></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-87b95dd171847daa29344497871d0251">3.2 - Installing Code Blind on AWS Elastic Kubernetes Service using Terraform</h1>
    <div class="lead">You can use Terraform to provision an EKS cluster and install Code Blind on it.</div>
	<h2 id="installation">Installation</h2>
<p>You can use Terraform to provision your Amazon EKS (Elastic Kubernetes Service) cluster and install Code Blind on it using the Helm Terraform provider.</p>
<p>An example of the EKS submodule config file can be found here:

<a href="https://github.com/josephbarnett/codeblind.ai/blob/release-1.38.0/" target="_blank" data-proofer-ignore>Terraform configuration with Code Blind submodule</a></p>
<p>Copy this file into a separate folder.</p>
<p>Configure your AWS CLI tool <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html">CLI configure</a>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>aws configure
</span></span></code></pre></div><p>Initialise your terraform:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>terraform init
</span></span></code></pre></div><h3 id="creating-cluster">Creating Cluster</h3>
<p>By editing <code>modules.tf</code> you can change the parameters that you need to. For instance, the - <code>machine_type</code> variable.</p>
<p>Configurable parameters:</p>
<ul>
<li>cluster_name - the name of the EKS cluster (default is &ldquo;agones-terraform-example&rdquo;)</li>
<li>agones_version - the version of agones to install (an empty string, which is the default, is the latest version from the <a href="https://agones.dev/chart/stable">Helm repository</a>)</li>
<li>machine_type - EC2 instance type for hosting game servers (default is &ldquo;t2.large&rdquo;)</li>
<li>region - the location of the cluster (default is &ldquo;us-west-2&rdquo;)</li>
<li>node_count - count of game server nodes for the default node pool (default is &ldquo;4&rdquo;)</li>
<li>log_level - possible values: Fatal, Error, Warn, Info, Debug (default is &ldquo;info&rdquo;)</li>
<li>feature_gates - a list of alpha and beta version features to enable. For example, &ldquo;PlayerTracking=true&amp;ContainerPortAllocation=true&rdquo;</li>
<li>gameserver_minPort - the lower bound of the port range which gameservers will listen on (default is &ldquo;7000&rdquo;)</li>
<li>gameserver_maxPort - the upper bound of the port range which gameservers will listen on (default is &ldquo;8000&rdquo;)</li>
<li>gameserver_namespaces - a list of namespaces which will be used to run gameservers (default is <code>[&quot;default&quot;]</code>). For example <code>[&quot;default&quot;, &quot;xbox-gameservers&quot;, &quot;mobile-gameservers&quot;]</code></li>
<li>force_update - whether or not to force the replacement/update of resource (default is true, false may be required to prevent immutability errors when updating the configuration)</li>
</ul>
<p>Now you can create an EKS cluster and deploy Code Blind on EKS:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>terraform apply <span style="color:#ce5c00;font-weight:bold">[</span>-var <span style="color:#000">agones_version</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;1.38.0&#34;</span><span style="color:#ce5c00;font-weight:bold">]</span>
</span></span></code></pre></div><p>After deploying the cluster with Code Blind, you can get or update your kubeconfig by using:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>aws eks --region us-west-2 update-kubeconfig --name agones-cluster
</span></span></code></pre></div><p>With the following output:</p>
<pre tabindex="0"><code>Added new context arn:aws:eks:us-west-2:601646756426:cluster/agones-cluster to /Users/user/.kube/config
</code></pre><p>Switch <code>kubectl</code> context to the recently created one:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl config use-context arn:aws:eks:us-west-2:601646756426:cluster/agones-cluster
</span></span></code></pre></div><p>Check that you are authenticated against the recently created Kubernetes cluster:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl get nodes
</span></span></code></pre></div><h3 id="uninstall-the-code-blind-and-delete-eks-cluster">Uninstall the Code Blind and delete EKS cluster</h3>
<p>Run the following commands to delete all Terraform provisioned resources:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>terraform destroy -target module.helm_agones.helm_release.agones -auto-approve <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span> sleep <span style="color:#0000cf;font-weight:bold">60</span>
</span></span><span style="display:flex;"><span>terraform destroy
</span></span></code></pre></div>

<div class="alert alert-info" role="alert">
<h4 class="alert-heading">Note</h4>

    There is an issue with the AWS Terraform provider:
<a href="https://github.com/terraform-providers/terraform-provider-aws/issues/9101">https://github.com/terraform-providers/terraform-provider-aws/issues/9101</a>
Due to this issue you should remove helm release first (as stated above),
otherwise <code>terraform destroy</code> will timeout and never succeed.
Remove all created resources manually in that case, namely: 3 Auto Scaling groups, EKS cluster, and a VPC with all dependent resources.

</div>


</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-bc8ff361c71609f0e8cdd22678d09ff8">3.3 - Installing Code Blind on Azure Kubernetes Service using Terraform</h1>
    <div class="lead">You can use Terraform to provision an AKS cluster and install Code Blind on it.</div>
	<h2 id="installation">Installation</h2>
<p>Install <code>az</code> utility by following <a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest">these instructions</a>.</p>
<p>The example of AKS submodule configuration could be found here:

<a href="https://github.com/josephbarnett/codeblind.ai/blob/release-1.38.0/" target="_blank" data-proofer-ignore>Terraform configuration with Code Blind submodule</a></p>
<p>Copy <code>module.tf</code> file into a separate folder.</p>
<p>Log in to Azure CLI:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>az login
</span></span></code></pre></div><p>Configure your terraform:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>terraform init
</span></span></code></pre></div><p>Create a service principal and configure its access to Azure resources:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>az ad sp create-for-rbac
</span></span></code></pre></div><p>Now you can deploy your cluster (use values from the above command output):</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>terraform apply -var <span style="color:#000">client_id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;&lt;appId&gt;&#34;</span> -var <span style="color:#000">client_secret</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;&lt;password&gt;&#34;</span>
</span></span></code></pre></div><p>Once you created all resources on AKS you can get the credentials so that you can use <code>kubectl</code> to configure your cluster:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>az aks get-credentials --resource-group agonesRG --name test-cluster
</span></span></code></pre></div><p>Check that you have access to the Kubernetes cluster:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl get nodes
</span></span></code></pre></div><p>Configurable parameters:</p>
<ul>
<li>log_level - possible values: Fatal, Error, Warn, Info, Debug (default is &ldquo;info&rdquo;)</li>
<li>cluster_name - the name of the AKS cluster (default is &ldquo;agones-terraform-example&rdquo;)</li>
<li>agones_version - the version of agones to install (an empty string, which is the default, is the latest version from the <a href="https://agones.dev/chart/stable">Helm repository</a>)</li>
<li>machine_type - node machine type for hosting game servers (default is &ldquo;Standard_D2_v2&rdquo;)</li>
<li>disk_size - disk size of the node</li>
<li>region - the location of the cluster</li>
<li>node_count - count of game server nodes for the default node pool (default is &ldquo;4&rdquo;)</li>
<li>feature_gates - a list of alpha and beta version features to enable. For example, &ldquo;PlayerTracking=true&amp;ContainerPortAllocation=true&rdquo;</li>
<li>gameserver_minPort - the lower bound of the port range which gameservers will listen on (default is &ldquo;7000&rdquo;)</li>
<li>gameserver_maxPort - the upper bound of the port range which gameservers will listen on (default is &ldquo;8000&rdquo;)</li>
<li>gameserver_namespaces - a list of namespaces which will be used to run gameservers (default is <code>[&quot;default&quot;]</code>). For example <code>[&quot;default&quot;, &quot;xbox-gameservers&quot;, &quot;mobile-gameservers&quot;]</code></li>
<li>force_update - whether or not to force the replacement/update of resource (default is true, false may be required to prevent immutability errors when updating the configuration)</li>
</ul>
<h2 id="uninstall-the-code-blind-and-delete-aks-cluster">Uninstall the Code Blind and delete AKS cluster</h2>
<p>Run next command to delete all Terraform provisioned resources:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>terraform destroy
</span></span></code></pre></div><h2 id="reference">Reference</h2>
<p>Details on how you can authenticate your AKS terraform provider using official <a href="https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/guides/service_principal_client_secret">instructions</a>.</p>
<h2 id="next-steps">Next Steps</h2>
<ul>
<li><a href="/docs/installation/confirm/">Confirm Code Blind is up and running</a></li>
</ul>

</div>



    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-34aceca87fb9ffae4f142749784a1ea1">4 - Confirming Code Blind Installation</h1>
    <div class="lead">Verify Code Blind is installed and has started successfully.</div>
	<p>To confirm Code Blind is up and running, run the following command:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl describe --namespace agones-system pods
</span></span></code></pre></div><p>It should describe six pods created in the <code>agones-system</code> namespace, with no error messages or status. All <code>Conditions</code> sections should look like this:</p>
<pre tabindex="0"><code>Conditions:
  Type              Status
  Initialized       True
  Ready             True
  ContainersReady   True
  PodScheduled      True
</code></pre><p>All this pods should be in a <code>RUNNING</code> state:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl get pods --namespace agones-system
</span></span></code></pre></div><pre tabindex="0"><code>NAME                                 READY   STATUS    RESTARTS   AGE
agones-allocator-5c988b7b8d-cgtbs    1/1     Running   0          8m47s
agones-allocator-5c988b7b8d-hhhr5    1/1     Running   0          8m47s
agones-allocator-5c988b7b8d-pv577    1/1     Running   0          8m47s
agones-controller-7db45966db-56l66   1/1     Running   0          8m44s
agones-ping-84c64f6c9d-bdlzh         1/1     Running   0          8m37s
agones-ping-84c64f6c9d-sjgzz         1/1     Running   0          8m47s
</code></pre><p>That&rsquo;s it!</p>
<p>Now with Code Blind installed, you can utilise its <a href="https://kubernetes.io/docs/concepts/api-extension/custom-resources/">Custom Resource Definitions</a> to create
resources of type <code>GameServer</code>, <code>Fleet</code> and more!</p>
<h2 id="whats-next">What&rsquo;s next</h2>
<ul>
<li>Go through the <a href="https://codeblind.ai/docs/getting-started/create-gameserver/">Create a Game Server Quickstart</a></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-be3b0f3fd44e1d99c89c139c84e9d1fa">5 - Upgrading Code Blind and Kubernetes</h1>
    <div class="lead">Strategies and techniques for managing Code Blind and Kubernetes upgrades in a safe manner.</div>
	

<div class="alert alert-info" role="alert">
<h4 class="alert-heading">Note</h4>

    Whichever approach you take to upgrading Code Blind, make sure to test it in your development environment
before applying it to production.

</div>

<h2 id="upgrading-code-blind">Upgrading Code Blind</h2>
<p>The following are strategies for safely upgrading Code Blind from one version to another. They may require adjustment to
your particular game architecture but should provide a solid foundation for updating Code Blind safely.</p>
<p>The recommended approach is to use <a href="/docs/installation/upgrading/#upgrading-agones-multiple-clusters">multiple clusters</a>, such that the upgrade can be tested
gradually with production load and easily rolled back if the need arises.</p>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Warning</h4>

    Changing <a href="https://codeblind.ai/docs/guides/feature-stages/#feature-gates">Feature Gates</a> within your Code Blind install
can constitute an &ldquo;upgrade&rdquo; as it may create or remove functionality
in the Code Blind installation that may not be forward or backward compatible with installed resources in an existing
installation.

</div>

<h3 id="upgrading-code-blind-multiple-clusters">Upgrading Code Blind: Multiple Clusters</h3>
<p>We essentially want to transition our GameServer allocations from a cluster with the old version of Code Blind,
to a cluster with the upgraded version of Code Blind while ensuring nothing surprising
happens during this process.</p>
<p>This also allows easy rollback to the previous infrastructure that we already know to be working in production, with
minimal interruptions to player experience.</p>
<p>The following are steps to implement this:</p>
<ol>
<li>Create a new cluster of the same size or smaller as the current cluster.</li>
<li>Install the new version of Code Blind on the new cluster.</li>
<li>Deploy the same set of Fleets, GameServers and FleetAutoscalers from the old cluster into the new cluster.</li>
<li>With your matchmaker, start sending a small percentage of your matched players&rsquo; game sessions to the new cluster.</li>
<li>Assuming everything is working successfully on the new cluster, slowly increase the percentage of matched sessions to the new cluster, until you reach 100%.</li>
<li>Once you are comfortable with the stability of the new cluster with the new Code Blind version, shut down the old cluster.</li>
<li>Congratulations - you have now upgraded to a new version of Code Blind! 👍</li>
</ol>
<h3 id="upgrading-code-blind-single-cluster">Upgrading Code Blind: Single Cluster</h3>
<p>If you are upgrading a single cluster, we recommend creating a maintenance window, in which your game goes offline
for the period of your upgrade, as there will be a short period in which Code Blind will be non-responsive during the upgrade.</p>
<h4 id="installation-with-installyaml">Installation with install.yaml</h4>
<p>If you installed <a href="/docs/installation/install-agones/yaml/">Code Blind with install.yaml</a>, then you will need to delete
the previous installation of Code Blind before upgrading to the new version, as we need to remove all of Code Blind before installing
the new version.</p>
<ol>
<li>Start your maintenance window.</li>
<li>Delete the current set of Fleets, GameServers and FleetAutoscalers in your cluster.</li>
<li>Make sure to delete the same version of Code Blind that was previously installed, for example:
<code>kubectl delete -f https://raw.githubusercontent.com/googleforgames/agones/&lt;old-release-version&gt;/install/yaml/install.yaml</code></li>
<li>Install Code Blind <a href="/docs/installation/install-agones/yaml/">with install.yaml</a>.</li>
<li>Deploy the same set of Fleets, GameServers and FleetAutoscalers back into the cluster.</li>
<li>Run any other tests to ensure the Code Blind installation is working as expected.</li>
<li>Close your maintenance window.</li>
<li>Congratulations - you have now upgraded to a new version of Code Blind! 👍</li>
</ol>
<h4 id="installation-with-helm">Installation with Helm</h4>
<p>Helm features capabilities for upgrading to newer versions of Code Blind without having to uninstall Code Blind completely.</p>
<p>For details on how to use Helm for upgrades, see the <a href="https://v2.helm.sh/docs/helm/#helm-upgrade">helm upgrade</a> documentation.</p>
<p>Given the above, the steps for upgrade are simpler:</p>
<ol>
<li>Start your maintenance window.</li>
<li>Delete the current set of Fleets, GameServers and FleetAutoscalers in your cluster.</li>
<li>Run <code>helm upgrade</code> with the appropriate arguments, such a <code>--version</code>, for your specific upgrade</li>
<li>Deploy the same set of Fleets, GameServers and FleetAutoscalers back into the cluster.</li>
<li>Run any other tests to ensure the Code Blind installation is working as expected.</li>
<li>Close your maintenance window.</li>
<li>Congratulations - you have now upgraded to a new version of Code Blind! 👍</li>
</ol>
<h2 id="upgrading-kubernetes">Upgrading Kubernetes</h2>
<p>The following are strategies for safely upgrading the underlying Kubernetes cluster from one version to another.
They may require adjustment to your particular game architecture but should provide a solid foundation for updating your cluster safely.</p>
<p>The recommended approach is to use <a href="/docs/installation/upgrading/#multiple-clusters">multiple clusters</a>, such that the upgrade can be tested
gradually with production load and easily rolled back if the need arises.</p>
<p>Code Blind has <a href="/docs/installation/#agones-and-kubernetes-supported-versions">multiple supported Kubernetes versions</a> for each version. You can stick with a minor Kubernetes version until it is not supported by Code Blind, but it is recommended to do supported minor (e.g. 1.12.1 ➡ 1.13.2) Kubernetes version upgrades at the same time as a matching Code Blind upgrades.</p>
<p>Patch upgrades (e.g. 1.12.1 ➡ 1.12.3) within the same minor version of Kubernetes can be done at any time.</p>
<h3 id="multiple-clusters">Multiple Clusters</h3>
<p>This process is very similar to the <a href="/docs/installation/upgrading/#upgrading-agones-multiple-clusters">Upgrading Code Blind: Multiple Clusters</a> approach above.</p>
<p>We essentially want to transition our GameServer allocations from a cluster with the old version of Kubernetes,
to a cluster with the upgraded version of Kubernetes while ensuring nothing surprising
happens during this process.</p>
<p>This also allows easy rollback to the previous infrastructure that we already know to be working in production, with
minimal interruptions to player experience.</p>
<p>The following are steps to implement this:</p>
<ol>
<li>Create a new cluster of the same size or smaller as the current cluster, with the new version of Kubernetes</li>
<li>Install the same version of Code Blind on the new cluster, as you have on the previous cluster.</li>
<li>Deploy the same set of Fleets and/or GameServers from the old cluster into the new cluster.</li>
<li>With your matchmaker, start sending a small percentage of your matched players&rsquo; game sessions to the new cluster.</li>
<li>Assuming everything is working successfully on the new cluster, slowly increase the percentage of matched sessions to the new cluster, until you reach 100%.</li>
<li>Once you are comfortable with the stability of the new cluster with the new Kubernetes version, shut down the old cluster.</li>
<li>Congratulations - you have now upgraded to a new version of Kubernetes! 👍</li>
</ol>
<h3 id="single-cluster">Single Cluster</h3>
<p>If you are upgrading a single cluster, we recommend creating a maintenance window, in which your game goes offline
for the period of your upgrade, as there will be a short period in which Code Blind will be non-responsive during the node
upgrades.</p>
<ol>
<li>Start your maintenance window.</li>
<li>Scale your Fleets down to 0 and/or delete your GameServers. This is a good safety measure so there aren&rsquo;t race conditions
between the Code Blind controller being recreated and GameServers being deleted doesn&rsquo;t occur, and GameServers can end up stuck in erroneous states.</li>
<li>Start and complete your control plane upgrade(s).</li>
<li>Start and complete your node upgrades.</li>
<li>Scale your Fleets back up and/or recreate your GameServers.</li>
<li>Run any other tests to ensure the Code Blind installation is still working as expected.</li>
<li>Close your maintenance window.</li>
<li>Congratulations - you have now upgraded to a new version of Kubernetes! 👍</li>
</ol>

</div>



    
	
  



          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Discord" aria-label="Discord">
    <a target="_blank" rel="noopener" href="https://join.discord.com/t/codeblind/shared_invite/12345" aria-label="Discord">
      <i class="fab fa-discord"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="User mailing list" aria-label="User mailing list">
    <a target="_blank" rel="noopener" href="https://groups.google.com/forum/#!forum/codeblind-discuss" aria-label="User mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="X" aria-label="X">
    <a target="_blank" rel="noopener" href="https://twitter.com/codeblind" aria-label="X">
      <i class="fab fa-x-twitter"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Community Meetings" aria-label="Community Meetings">
    <a target="_blank" rel="noopener" href="https://github.com/josephbarnett/" aria-label="Community Meetings">
      <i class="fab fa-youtube"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/josephbarnett/" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Resume" aria-label="Resume">
    <a target="_blank" rel="noopener" href="https://github.com/josephbarnett/" aria-label="Resume">
      <i class="fab fa-linkedin"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Facebook" aria-label="Facebook">
    <a target="_blank" rel="noopener" href="https://github.com/josephbarnett/" aria-label="Facebook">
      <i class="fab fa-facebook"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Contact" aria-label="Contact">
    <a target="_blank" rel="noopener" href="https://github.com/josephbarnett/codeblind.ai" aria-label="Contact">
      <i class="fab fa-whatsapp"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2024
    <span class="td-footer__authors">Copyright Code Blind LLC</span></span><span class="td-footer__all_rights_reserved">All Rights Reserved</span><span class="ms-2"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">Privacy Policy</a></span>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/js/main.js"></script>
<script src='/js/prism.js'></script>
<script src='/js/tabpane-persist.js'></script>
<script src=https://codeblind.ai/js/asciinema-player.js></script>

  </body>
</html>
